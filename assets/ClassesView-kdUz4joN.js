import{d as Ke,k as o,y as J,l as Xe,c as a,b as es,a as s,i as w,x as r,w as x,u as _,P as ss,A as i,F as c,r as m,B as Z,z as C,I as ts,Q as K,t as y,v as j,S as ns,U as ne,o as l,J as ls}from"./vue-q1_PGPlY.js";import{H as as,M as S}from"./Header-DlwAki33.js";import{u as os,w as is,V as p,g as he,W as us,C as le}from"./util-Dz5jBCXf.js";import{s as ds}from"./index-Davjo1HD.js";import{_ as rs}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./xterm-CbIsyoms.js";import"./monaco-D2fC6ZYY.js";const cs={class:"main"},vs={class:"student-assignment-cont"},ms={class:"assignment-info"},ps={class:"flex-sb al-c"},gs={key:0,class:"instructions"},fs={class:"txt-subtle"},Cs={class:"lesson-list"},ys={key:0,class:"txt-subtle"},bs={class:"lesson-info"},hs={class:"lesson-name"},_s=["onClick"],ks={class:"flex-col student-class-cont"},ws={class:"student-class-header flex-sb"},xs={class:"join-code-cont"},Ss={ref:"copyJoinCode"},Ds={class:"student-class-grid"},As={class:"flex-col gp05"},Is={class:"flex cell"},Ms={key:0,class:"material-symbols-outlined"},Us={key:0},Ts={class:"flex-col gp05"},Ls={class:"assignments-full assignment"},js={class:"flex-sb al-c"},Ps={class:"flex gp05"},Ns={class:"material-symbols-outlined status-icon"},Es=["onClick"],Os={key:0,class:"txt-subtle pd051"},Vs={class:"view-assignment-cont"},Js={class:"cell student-name flex-st"},Rs=["src"],$s={class:"assignment-options-cont"},Gs={key:0,class:"error-message"},qs={key:1,class:"error-message"},Bs={key:2},Fs={class:"lesson-checkboxes"},Hs=["value"],zs={class:"flex"},Ws={class:"flex"},Qs={key:0,for:"assignmentPublishDate"},Ys={key:0,class:"error-message"},Zs={class:"join-menu-cont"},Ks={key:0,class:"error-message"},Xs={class:"class-options-cont"},et={class:"flex"},st={class:"flex-col"},tt={class:"banned-users"},nt={key:0,class:"txt-subtle"},lt={class:"flex banned-user"},at=["onClick"],ot={class:"manage-class-container"},it={class:"manage-class-header"},ut={class:"join-code-cont"},dt=["co-label"],rt={ref:"copyJoinCode"},ct={class:"manage-class-body"},vt={class:"manage-class-left"},mt={key:0,class:"student-container"},pt={key:1,class:"student-container"},gt={class:"student-item"},ft={class:"flex-st"},Ct=["src"],yt=["onClick"],bt={class:"manage-class-right"},ht={key:0,class:"assignments-empty assignment"},_t={class:"assignments-full assignment"},kt={class:"flex-sb al-c"},wt={class:"flex gp05"},xt=["co-label"],St=["onClick"],Dt=["onClick"],At={key:0,class:"txt-subtle pd051"},It={class:"classes"},Mt={class:"class-header"},Ut={key:0,class:"header-right"},Tt={key:1,class:"header-right"},Lt={class:"class-bottom"},jt={class:"selection-opx"},Pt=["onClick"],Nt={key:0,class:"empty-container"},Et={class:"card"},Ot={class:"card-left"},Vt={class:"instructor"},Jt={class:"card-right"},Rt=["onClick"],$t={key:2,class:"empty-container"},Gt={key:0},qt={class:"card"},Bt={key:0,class:"card-left"},Ft={class:"card-right"},Ht=["onClick"],zt=Ke({__name:"ClassesView",setup(Wt){const ae=os(),b=o([]),f=o([]);let h=o(!0);const D=o(!1);function _e(){D.value&&(h.value=!h.value)}let A=o(!1);const v=o();let ke=J("createClassMenu");async function we(){v.value={name:"",students:[],instructor:{name:"",uid:void 0},assignments:[],endDate:new Date,isLocked:!1,bannedUsers:[]},A.value=!A.value}async function xe(){if(!v.value.name||!v.value.publishDate||!v.value.endDate){console.error("Missing required fields");return}if(v.value.endDate<=v.value.publishDate){console.error("End date must be after publish date");return}await Se(ls(v.value)),A.value=!1}async function Se(n){console.log("Sending request to create class...");try{let e=await p("POST","/classes",{autoToken:!0,body:n});console.log("Server (post class): ",e.data),f.value.push(e.data)}catch(e){console.log("Could not create class: ",e)}}async function oe(n){try{let e=await p("GET","/classes/",{query:{instructorClasses:n}});if(e.code!=500)return e.data}catch(e){return console.log("Could not create assignment: ",e),[]}}const I=o(!1),P=o("");J("joinClassMenu");async function ie(){P.value="",I.value=!I.value}const N=o("");async function De(){const n=P.value.trim();if(N.value="",n.length!==6){console.error("Join code must be exactly 6 characters");return}await Ae(n)}async function Ae(n){try{let e=await p("PATCH","/classes/join/:joinCode",{params:{joinCode:n}});if(console.log("Server (join class): ",e),e.code===403){N.value=e.text;return}if(e.code!==200||!e.data){console.error("Join failed",e.text),N.value=e.text||"Unknown error...";return}b.value.push(e.data),I.value=!1}catch(e){console.log("Could not join class: ",e)}}const ue=o(0),Ie=[{name:"ONGOING CLASSES",index:0},{name:"UPCOMING CLASSES",index:1},{name:"PAST CLASSES",index:2}],X=o(),ee=o();function Me(n){switch(ue.value=n,n){case 1:ee.value=f.value.filter(e=>e.publishDate.getTime()<=new Date().getTime()),X.value=b.value.filter(e=>e.publishDate.getTime()<=new Date().getTime());case 2:ee.value=f.value.filter(e=>e.publishDate.getTime()>new Date().getTime()),X.value=b.value.filter(e=>e.publishDate.getTime()>new Date().getTime());case 3:ee.value=f.value.filter(e=>e.endDate.getTime()<new Date().getTime()),X.value=b.value.filter(e=>e.endDate.getTime()<new Date().getTime())}}Xe(async()=>{await is()&&(b.value=await oe(!1),console.log("Fetched student classes ",b.value),D.value=ae.g_user.data.isInstructor,D.value&&(h.value=!0,f.value=await oe(!0),console.log("Fetched instructor classes ",f.value)),console.log("instructor status: "+D.value))});const M=o(!1),u=o(),de=o("");J("manageClassMenu");async function Ue(n){u.value=n,de.value=n.name.toString(),M.value=!M.value,E.value=await re(n._id),await he(0).then(async()=>{await us()})}const E=o();async function re(n){try{let e=await p("GET","/classes/:classId/assignments",{params:{classId:n}});if(console.log("Server (get assignments): ",e),e.code!==200||!e.data){console.error("Fetch assignments failed",e.text);return}return e.data}catch(e){console.log("Could not join class: ",e)}}async function ce(n,e){new le("<div style='display:flex;gap:1em;padding-top:1rem;'><span class='material-symbols-outlined'>gavel</span><span>Ban user</span></div>","<div style='display:flex;padding:0.5em 1em;'>Are you sure you want to ban this user?</div>",async()=>{await Te(n,e)},()=>{},"Ban user","Cancel").load()}async function Te(n,e){try{let t=await p("PATCH","/classes/:classId/ban",{params:{classId:u.value._id},query:{banUser:e,banning:n}});t.data&&(u.value.students=t.data.students,u.value.bannedUsers=t.data.bannedUsers),console.log("Server (ban user): ",t.data)}catch(t){console.log("Could not join class: ",t)}}async function Le(){u.value.isLocked=!u.value.isLocked,await je({isLocked:u.value.isLocked})}async function je(n){let e=n;try{let t=await p("PATCH","/classes/:classId",{params:{classId:u.value._id},body:e});console.log("Server (edit class): ",t),b.value.find(d=>{d._id===t.data._id&&(d=t.data)}),I.value=!1}catch(t){console.log("Could not join class: ",t)}}async function ve(){N.value="",R.value="",$.value=""}function me(n){const e=encodeURIComponent(n);return`${ds}/proxy?url=${e}`}J("createAssignmentMenu");const U=o(!1),g=o(),se=o("Lessons"),H=o(!0),pe=o();async function Pe(){T.value=!1,g.value={name:"",publishDate:new Date,classId:void 0,dueDate:new Date,completions:[],assignedContent:{instructions:"",lessons:[],projects:[],challenges:[]}},U.value=!U.value;try{let n=await p("GET","/classes/:classId/lessons",{params:{classId:u.value._id}});console.log("Server (get lesson data): ",n),pe.value=n.data}catch(n){console.log("Could not get lesson metadata: ",n)}}const R=o(""),$=o(""),z=o("");async function Ne(){if(g.value.name.length<3){R.value="Assignment name must be 3 characters";return}else if(g.value.assignedContent.instructions.length<3){$.value="Please add instructions";return}else z.value="",$.value="",R.value="";try{let n=await p("POST","/classes/:classId/assignments",{params:{classId:u.value._id},body:g.value});if(!n.ok||!n.data){n.code==400&&(z.value="Please specify assignment content."),console.warn("Could not create assignment",n.code,"data: "+n.text);return}console.log("Server (create assignment): ",n),u.value.assignments.push(n.data._id),E.value.push(n.data),U.value=!1}catch(n){console.log("Could not create assignment: ",n)}}async function Ee(n){new le("<div style='display:flex;gap:1em;padding-top:1rem;'><span class='material-symbols-outlined'>delete</span><span>Delete Assignment</span></div>","<div style='display:flex;padding:0.5em 1em;'>Are you sure you want to delete this assignment?</div>",async()=>{try{let e=await p("DELETE","/classes/:classId/assignments/:assignmentId",{params:{classId:u.value._id,assignmentId:n}});if(e.ok){let t=E.value.findIndex(d=>d._id==n);t!=-1&&E.value.splice(t,1),t=u.value.assignments.indexOf(n),t!=-1&&u.value.assignments.splice(t,1)}console.log("Server (delete assignment): ",e.data)}catch(e){console.log("Could not join class: ",e)}},()=>{},"Delete Assignment","Cancel").load()}const T=o(!1),Oe=J("classSettingsMenu");async function Ve(){U.value=!1,T.value=!T.value}async function Je(){M.value=!1,T.value=!1,new le("<div style='display:flex;gap:1em;padding-top:1rem;'><span class='material-symbols-outlined'>delete</span><span>Delete Class</span></div>","<div style='display:flex;padding:0.5em 1em;'>Are you sure you want to delete this class?</div>",async()=>{let n=u.value;try{let e=await p("DELETE","/classes/:classId",{params:{classId:n._id}});if(e.ok){let t=f.value.indexOf(n);t!=-1&&f.value.splice(t,1)}console.log("Server (delete class): ",e.data)}catch(e){console.log("Could not delete class: ",e)}},()=>{},"Delete Class","Cancel").load()}const O=o(),ge=o("Assignment Details"),fe=o(),k=o(),Ce=o([]);async function Re(n){O.value=!O.value,k.value=E.value.find(e=>e._id==n),ge.value=k.value.name+": Info",O.value&&await $e()}async function $e(){try{let n=await p("PATCH","/classes/:classId/assignments/:assignmentId/",{body:{lessons:k.value.assignedContent.lessons,challenges:k.value.assignedContent.challenges,projects:k.value.assignedContent.projects},params:{classId:u.value._id,assignmentId:k.value._id}});n.code>=299&&(n.code==400?console.error("No students in class",n.text):console.error("Unknown error getting assignment completion details",n.text)),fe.value=n.data.details,Ce.value=n.data.lessondata,console.log("Sever response (get assignment completion details): ",n.data)}catch(n){console.log("Could not get assignment completion details",n)}}const ye=J("copyJoinCode");async function be(){ye.value.textContent="Copied!";let n;M.value?n=u.value.joinCode:V.value&&(n=L.value.joinCode);try{await navigator.clipboard.writeText(n),console.log("Class joincode copied")}catch(e){console.error("Could not copy join code: ",e)}await he(700),ye.value.textContent="Copy"}function Ge(n,e){const t=n.lessonsCompleted.find(d=>d.lid===e);return t?t.isCompleted?"Complete":"In progress":"Not started"}function qe(n){const e=Ce.value.find(t=>t.lid===n);return e?e.name:"Unknown lesson"}const L=o(),W=o(),V=o(!1),Q=o(new Map);async function Be(n){if(V.value=!V.value,L.value=n,W.value=await re(n._id),W.value){Q.value.clear();for(const e of W.value)await Fe(n._id,e)}}async function Fe(n,e){try{let t=await p("GET","/classes/:classId/assignments/:assignmentId/completion",{params:{classId:n,assignmentId:e._id}});if(t.ok&&t.data){const d=t.data.lessons;Q.value.set(e._id,{completed:d.filter(F=>F.state==="completed").length,started:d.filter(F=>F.state==="started").length,notStarted:d.filter(F=>F.state==="not_started").length,total:d.length})}}catch(t){console.log("Could not get completion data for assignment:",e._id,t)}}function He(n){return Q.value.get(n)?.completed??0}function te(n){const e=Q.value.get(n);return!e||e.total===0?"not_started":e.completed===e.total?"completed":e.completed>0||e.started>0?"in_progress":"not_started"}const G=o(!1);async function ze(){G.value=!G.value}const Y=o(!1),q=o(),B=o([]);async function We(n){q.value=n,Y.value=!0;try{let e=await p("GET","/classes/:classId/assignments/:assignmentId/completion",{params:{classId:L.value._id,assignmentId:n._id}});e.ok&&e.data?(B.value=e.data.lessons,console.log("Server (get student assignment completion): ",e.data)):(console.error("Failed to get assignment completion",e.text),B.value=[])}catch(e){console.log("Could not get assignment completion: ",e),B.value=[]}}function Qe(n){switch(n){case"not_started":return"Not Started";case"started":return"In Progress";case"completed":return"Completed";default:return"Unknown"}}function Ye(n){switch(n){case"not_started":return"state-not-started";case"started":return"state-started";case"completed":return"state-completed";default:return""}}function Ze(n){window.location.href=`/learn?lid=${n}`}return(n,e)=>(l(),a(c,null,[es(as,{"btn-index":3}),s("div",cs,[Y.value?(l(),w(S,{key:0,ref:"studentAssignmentMenu",title:q.value?.name||"Assignment",opened:Y.value,"onUpdate:opened":e[0]||(e[0]=t=>Y.value=t),icon:"assignment",height:"min-content",width:"max-content","new-layer":!0},{default:x(()=>[s("div",vs,[s("div",ms,[s("div",ps,[e[24]||(e[24]=s("span",{class:"usn"},"Due Date:",-1)),s("span",null,i(new Date(q.value?.dueDate).toLocaleDateString()),1)]),q.value?.assignedContent.instructions?(l(),a("div",gs,[e[25]||(e[25]=s("span",{class:"usn"},"Instructions:",-1)),s("span",fs,i(q.value.assignedContent.instructions),1)])):r("",!0)]),s("div",Cs,[e[27]||(e[27]=s("h3",null,"Assigned Lessons:",-1)),B.value.length===0?(l(),a("div",ys," Loading lessons... ")):r("",!0),(l(!0),a(c,null,m(B.value,t=>(l(),a("div",{key:t.lid,class:"lesson-item"},[s("div",bs,[s("span",hs,i(t.name),1),s("span",{class:Z(["lesson-state",Ye(t.state)])},i(Qe(t.state)),3)]),s("button",{onClick:d=>Ze(t.lid),class:"go-to-lesson"},[s("span",null,i(t.state==="completed"?"Review":"Start"),1),e[26]||(e[26]=s("span",{class:"material-symbols-outlined"},"arrow_right_alt",-1))],8,_s)]))),128))])])]),_:1},8,["title","opened"])):r("",!0),V.value?(l(),w(S,{key:1,ref:"studentClassMenu",title:L.value.name,opened:V.value,"onUpdate:opened":e[1]||(e[1]=t=>V.value=t),icon:"Group",height:"min-content",width:"max-content"},{default:x(()=>[s("div",ks,[s("div",ws,[s("div",xs,[e[29]||(e[29]=s("span",{class:"usn"},"Join Code: ",-1)),s("span",null,i(L.value.joinCode),1),s("button",{onClick:be},[s("span",Ss,"Copy",512),e[28]||(e[28]=s("span",{class:"material-symbols-outlined"},"content_copy",-1))])]),s("div",{class:"edit-class-cont"},[s("button",{onClick:ze},e[30]||(e[30]=[C(" Class Settings "),s("span",{class:"material-symbols-outlined"},"settings",-1)]))])]),s("div",Ds,[s("div",As,[e[32]||(e[32]=s("h3",null,"Classmates: ",-1)),(l(!0),a(c,null,m(L.value.students,t=>(l(),a("div",null,[s("span",Is,[s("span",null,[C(i(t.name),1),t.studentId.toString()===_(ae).g_user.data.uid?(l(),a("span",Ms,"person")):r("",!0)])])]))),256)),L.value.students.length<=0?(l(),a("div",Us,e[31]||(e[31]=[s("span",{class:"flex cell"}," You shouldn't be seeing this... paul messed up somewhere ",-1)]))):r("",!0)]),s("div",Ts,[e[34]||(e[34]=s("h3",null,"Assignments: ",-1)),(l(!0),a(c,null,m(W.value,t=>(l(),a("div",Ls,[s("div",js,[s("span",null,i(t.name),1),s("div",Ps,[s("div",{class:Z(["flex al-c gp05 assignment-status","status-"+te(t._id)])},[s("span",Ns,i(te(t._id)==="completed"?"done_all":te(t._id)==="in_progress"?"pending":"radio_button_unchecked"),1),s("span",null,i(He(t._id))+" / "+i(t.assignedContent.lessons.length),1)],2),s("button",{class:"view-assignment",onClick:d=>We(t)},e[33]||(e[33]=[C(" View "),s("span",{class:"material-symbols-outlined"},"info",-1)]),8,Es)])]),t.assignedContent.instructions?(l(),a("span",Os,i(t.assignedContent.instructions),1)):r("",!0)]))),256))])])])]),_:1},8,["title","opened"])):r("",!0),G.value?(l(),w(S,{key:2,ref:"studentClassSettingsMenu",title:"Class Settings",opened:G.value,"onUpdate:opened":e[2]||(e[2]=t=>G.value=t),icon:"settings",height:"150px",width:"380px"},{default:x(()=>e[35]||(e[35]=[s("div",{class:"flex-col"},[s("div",{class:"flex-st"}," Nothing here yet, paul's working on it :) ")],-1)])),_:1,__:[35]},8,["opened"])):r("",!0),O.value?(l(),w(S,{key:3,ref:"viewAssignmentMenu",title:ge.value,opened:O.value,"onUpdate:opened":e[3]||(e[3]=t=>O.value=t),icon:"info",height:"min-content",width:"max-content","new-layer":!0},{default:x(()=>[s("div",Vs,[s("div",{class:"details-grid",style:ts({"--lesson-count":k.value?.assignedContent.lessons.length||1})},[e[36]||(e[36]=s("div",{class:"header-cell"},"Student",-1)),(l(!0),a(c,null,m(k.value?.assignedContent.lessons,t=>(l(),a("div",{key:t,class:"header-cell"},i(qe(t)),1))),128)),(l(!0),a(c,null,m(fe.value,t=>(l(),a(c,{key:t.student.id},[s("div",Js,[s("img",{src:me(t.student.pfpURL),alt:"Student profile picture",crossorigin:"",class:"student-pfp"},null,8,Rs),s("span",null,i(t.student.name),1)]),(l(!0),a(c,null,m(k.value?.assignedContent.lessons,d=>(l(),a("div",{key:d,class:"cell"},i(Ge(t,d)),1))),128))],64))),128))],4)])]),_:1},8,["title","opened"])):r("",!0),U.value?(l(),w(S,{key:4,ref:"createAssignmentMenu",title:"Create Assignment",opened:U.value,"onUpdate:opened":e[10]||(e[10]=t=>U.value=t),icon:"assignment_add",height:"min-content",width:"400px",onOnClose:e[11]||(e[11]=t=>ve())},{default:x(()=>[s("form",{class:"assignment-menu-cont",onSubmit:K(Ne,["prevent"])},[s("div",$s,[e[40]||(e[40]=s("label",{for:"assignmentName"},"Name: ",-1)),y(s("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>g.value.name=t),placeholder:"Assignment Name",id:"assignmentName",class:"assignment-input",type:"text",minlength:"3",required:""},null,512),[[j,g.value.name,void 0,{trim:!0}]]),R.value?(l(),a("span",Gs,i(R.value),1)):r("",!0),e[41]||(e[41]=s("label",{for:"assignmentInstructions"},"Instructions:",-1)),y(s("input",{type:"text",id:"assignmentInstructions",required:"","onUpdate:modelValue":e[5]||(e[5]=t=>g.value.assignedContent.instructions=t),placeholder:"Complete the following work",minlength:"2",maxlength:"1024"},null,512),[[j,g.value.assignedContent.instructions,void 0,{trim:!0}]]),$.value?(l(),a("span",qs,i($.value),1)):r("",!0),e[42]||(e[42]=s("label",{for:"assignmentContent"},"Assignment Type: ",-1)),y(s("select",{id:"assignmentContent",required:"",class:"assignment-content","onUpdate:modelValue":e[6]||(e[6]=t=>se.value=t)},e[37]||(e[37]=[s("option",{value:"Lessons"},"Lesson",-1),s("option",{disabled:"",value:"Challenges"},"Challenge",-1),s("option",{disabled:"",value:"Projects"},"Project",-1)]),512),[[ns,se.value]]),se.value==="Lessons"?(l(),a("div",Bs,[e[38]||(e[38]=s("label",null,"Select lesson(s) to assign:",-1)),s("div",Fs,[(l(!0),a(c,null,m(pe.value,t=>(l(),a("label",{key:t.lid},[y(s("input",{type:"checkbox",value:t.lid,"onUpdate:modelValue":e[7]||(e[7]=d=>g.value.assignedContent.lessons=d)},null,8,Hs),[[ne,g.value.assignedContent.lessons]]),C(" "+i(t.name),1)]))),128))])])):r("",!0),s("div",zs,[e[39]||(e[39]=s("label",{for:"assignmentPublishNow"},"Publish now?",-1)),y(s("input",{type:"checkbox",id:"assignmentPublishNow","onUpdate:modelValue":e[8]||(e[8]=t=>H.value=t)},null,512),[[ne,H.value]])]),s("div",Ws,[H.value?r("",!0):(l(),a("label",Qs," Publish At: ")),H.value?r("",!0):y((l(),a("input",{key:1,"onUpdate:modelValue":e[9]||(e[9]=t=>g.value.publishDate=t),id:"assignmentPublishDate",class:"assignment-date-input",type:"date",required:""},null,512)),[[j,g.value.publishDate]])])]),e[43]||(e[43]=s("button",{type:"submit",class:"assignment-submission"},[s("span",null,"Create assignment "),s("span",{class:"material-symbols-outlined"},"arrow_right_alt")],-1)),z.value.length>=1?(l(),a("span",Ys,i(z.value),1)):r("",!0)],32)]),_:1},8,["opened"])):r("",!0),I.value?(l(),w(S,{key:5,ref:"joinClassMenu",title:"Join Class",opened:I.value,"onUpdate:opened":e[14]||(e[14]=t=>I.value=t),icon:"Group",height:"min-content",width:"max-content",onOnClose:ve},{default:x(()=>[s("div",Zs,[e[46]||(e[46]=s("span",null,"Enter 6-digit code to join a class:",-1)),s("form",{class:"join-options-cont",onSubmit:K(De,["prevent"])},[y(s("input",{"onUpdate:modelValue":e[12]||(e[12]=t=>P.value=t),class:"join-input",type:"text",placeholder:"QRF234",maxlength:"6",minlength:"6",pattern:"[A-Z0-9]{6}",required:"",onInput:e[13]||(e[13]=t=>P.value=P.value.toUpperCase().trim())},null,544),[[j,P.value]]),e[44]||(e[44]=s("button",{type:"submit",class:"material-symbols-outlined join-submission"}," arrow_right_alt ",-1))],32),N.value?(l(),a("span",Ks,[e[45]||(e[45]=s("span",{class:"material-symbols-outlined"},"lock",-1)),C(i(N.value),1)])):r("",!0)])]),_:1},8,["opened"])):r("",!0),_(A)?(l(),w(S,{key:6,ref_key:"createClassMenu",ref:ke,title:"Create Class",opened:_(A),"onUpdate:opened":e[19]||(e[19]=t=>ss(A)?A.value=t:A=t),icon:"Group",height:"min-content",width:"400px"},{default:x(()=>[s("form",{class:"class-menu-cont",onSubmit:K(xe,["prevent"])},[s("div",Xs,[e[48]||(e[48]=s("label",{for:"className"},"Name: ",-1)),y(s("input",{"onUpdate:modelValue":e[15]||(e[15]=t=>v.value.name=t),placeholder:"Class Name",id:"className",class:"class-input",type:"text",minlength:"6",required:""},null,512),[[j,v.value.name,void 0,{trim:!0}]]),e[49]||(e[49]=s("label",{for:"classPublishDate"},"Publish Date: ",-1)),y(s("input",{"onUpdate:modelValue":e[16]||(e[16]=t=>v.value.publishDate=t),id:"classPublishDate",class:"class-date-input",type:"date",required:""},null,512),[[j,v.value.publishDate]]),e[50]||(e[50]=s("label",{for:"classEndDate"},"End Date: ",-1)),y(s("input",{"onUpdate:modelValue":e[17]||(e[17]=t=>v.value.endDate=t),id:"classEndDate",class:"class-date-input",type:"date",required:""},null,512),[[j,v.value.endDate]]),s("div",et,[e[47]||(e[47]=s("label",{for:"classIsLocked"},"Disable join code: ",-1)),y(s("input",{"onUpdate:modelValue":e[18]||(e[18]=t=>v.value.isLocked=t),id:"classIsLocked",class:"class-is-locked",type:"checkbox"},null,512),[[ne,v.value.isLocked]])])]),e[51]||(e[51]=s("button",{type:"submit",class:"class-submission"},[s("span",null,"Create class "),s("span",{class:"material-symbols-outlined"},"arrow_right_alt")],-1))],32)]),_:1},8,["opened"])):r("",!0),T.value?(l(),w(S,{key:7,ref_key:"classSettingsMenu",ref:Oe,title:"Class Settings",opened:T.value,"onUpdate:opened":e[20]||(e[20]=t=>T.value=t),icon:"settings",height:"min-content",width:"380px"},{default:x(()=>[s("div",st,[s("div",tt,[e[53]||(e[53]=s("div",{class:"flex-st"},[s("span",{class:"material-symbols-outlined"}," manage_accounts "),C(" Banned Users ")],-1)),u.value.bannedUsers.length<=0?(l(),a("div",nt," Good news... No banned users! ")):(l(!0),a(c,{key:1},m(u.value.bannedUsers,t=>(l(),a("div",lt,[s("span",null,i(t.name),1),s("button",{class:"warn",onClick:d=>ce(!1,t._id)},e[52]||(e[52]=[C(" Unban "),s("span",{class:"material-symbols-outlined"},"gavel",-1)]),8,at)]))),256))]),s("button",{class:"warn",onClick:Je},e[54]||(e[54]=[C(" Delete Class"),s("span",{class:"material-symbols-outlined"},"delete",-1)]))])]),_:1},8,["opened"])):r("",!0),M.value?(l(),w(S,{key:8,ref:"manageClassMenu",title:de.value,opened:M.value,"onUpdate:opened":e[21]||(e[21]=t=>M.value=t),icon:"Group",height:"min-content",width:"max-content"},{default:x(()=>[s("div",ot,[s("div",it,[s("div",ut,[e[56]||(e[56]=s("span",{class:"usn"},"Join Code: ",-1)),s("span",null,i(u.value.joinCode.toUpperCase()),1),s("button",{onClick:Le},[s("div",{class:"material-symbols-outlined co-item","co-label":u.value.isLocked?"Class Locked":"Class Unlocked"},i(u.value.isLocked?"lock":"lock_open_right"),9,dt)]),s("button",{onClick:be},[s("span",rt,"Copy",512),e[55]||(e[55]=s("span",{class:"material-symbols-outlined"},"content_copy",-1))])]),s("div",{class:"edit-class-cont"},[s("button",{onClick:Ve},e[57]||(e[57]=[C(" Class Settings "),s("span",{class:"material-symbols-outlined"},"settings",-1)]))])]),s("div",ct,[s("div",vt,[e[59]||(e[59]=s("div",{class:"flex-sb al-c"},[s("h3",null,"Students:"),s("button",{style:{visibility:"hidden"}},[s("span",{class:"material-symbols-outlined"},"add")])],-1)),u.value.students.length<=0?(l(),a("div",mt,e[58]||(e[58]=[s("span",{class:"student-item"},"No students",-1)]))):(l(),a("div",pt,[(l(!0),a(c,null,m(u.value.students,t=>(l(),a("div",gt,[s("span",ft,[s("img",{crossorigin:"",src:me(t.pfpURL),alt:"Profile Picture",ref_for:!0,ref:"userProfilePicture",class:"student-pfp"},null,8,Ct),s("span",null,i(t.name),1)]),s("button",{class:"material-symbols-outlined warn",onClick:d=>ce(!0,t.studentId.toString())}," gavel ",8,yt)]))),256))]))]),s("div",bt,[s("div",{class:"flex-sb al-c"},[e[61]||(e[61]=s("h3",null,"Assignments:",-1)),s("button",{onClick:Pe},e[60]||(e[60]=[C(" Create "),s("span",{class:"material-symbols-outlined"},"add",-1)]))]),u.value.assignments.length<=0?(l(),a("div",ht,e[62]||(e[62]=[s("span",null,"Nothing to see here... Click the '+' icon to create an assignment! ",-1)]))):(l(!0),a(c,{key:1},m(E.value,t=>(l(),a("div",_t,[s("div",kt,[s("span",null,i(t.name),1),s("div",wt,[s("div",{class:"material-symbols-outlined co-item visibility","co-label":t.published?"Published":"Not yet published"},i(t.published?"visibility":"visibility_off"),9,xt),s("button",{class:"view-assignment",onClick:d=>Re(t._id)},e[63]||(e[63]=[C(" View "),s("span",{class:"material-symbols-outlined"},"info",-1)]),8,St),s("button",{class:"material-symbols-outlined delete warn",onClick:K(d=>Ee(t._id),["stop"])}," delete ",8,Dt)])]),t.assignedContent.instructions?(l(),a("span",At,i(t.assignedContent.instructions),1)):r("",!0)]))),256))])])])]),_:1},8,["title","opened"])):r("",!0),s("div",It,[s("div",Mt,[e[66]||(e[66]=s("div",{class:"header-left"},[s("span",{class:"material-symbols-outlined header-icon"},"group"),s("h1",null,"CLASS DASHBOARD")],-1)),D.value?(l(),a("div",Ut,[s("button",{onClick:_e}," INSTRUCTOR VIEW "+i(_(h)?"(on)":"(off)"),1),s("button",{class:"newButton",onClick:e[22]||(e[22]=t=>_(h)?we():ie())},[s("span",null,i(_(h)?"CREATE":"JOIN")+" CLASS",1),e[64]||(e[64]=s("span",{class:"material-symbols-outlined"},"add",-1))])])):(l(),a("div",Tt,[s("button",{class:"newButton",onClick:e[23]||(e[23]=t=>ie())},e[65]||(e[65]=[s("span",null,"JOIN CLASS",-1),s("span",{class:"material-symbols-outlined"},"add",-1)]))]))]),s("div",Lt,[s("div",jt,[(l(),a(c,null,m(Ie,t=>s("span",{class:Z([{active:ue.value===t.index},"class-category"]),key:t.index,onClick:d=>Me(t.index)},i(t.name),11,Pt)),64))]),s("div",{class:Z(["class-container",{"instructor-classes":_(h),"student-classes":!_(h)}])},[D.value&&_(h)&&f.value.length<=0?(l(),a("div",Nt,e[67]||(e[67]=[s("span",null,"This is where you'll manage the classes for which you're an instructor.",-1),s("span",null,'Click the "Create Class" button to get started!',-1)]))):D.value&&_(h)&&f.value.length>=1?(l(!0),a(c,{key:1},m(f.value,t=>(l(),a("div",Et,[s("div",Ot,[s("h3",null,i(t.name),1),s("span",Vt,"Instructor: "+i(t.instructor.name),1)]),s("div",Jt,[s("button",{onClick:d=>Ue(t)}," Manage Class ",8,Rt)])]))),256)):b.value.length<=0?(l(),a("div",$t,[e[68]||(e[68]=s("span",null,`You're not in any classes yet! Ask your instructor for a join code and click "Join Class" to get started.`,-1)),D.value?(l(),a("span",Gt,"Psst - We see you're an instructor! If you're looking to create/manage classes, click on the instructor view toggle.")):r("",!0)])):(l(),a(c,{key:3},[b.value.length>=1?(l(!0),a(c,{key:0},m(b.value,t=>(l(),a("div",qt,[t.published?(l(),a("div",Bt,[s("h3",null,i(t.name),1),s("span",null,"Professor: "+i(t.instructor.name),1)])):r("",!0),s("div",Ft,[s("button",{onClick:d=>Be(t)}," View Class ",8,Ht)])]))),256)):r("",!0)],64))],2)])])])],64))}}),tn=rs(zt,[["__scopeId","data-v-89490463"]]);export{tn as default};
