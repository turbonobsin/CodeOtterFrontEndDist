import{d as Xe,k as o,y as J,l as es,c as l,b as ss,a as s,i as x,x as u,w as S,u as _,P as ts,A as i,F as v,r as p,B as K,z as C,I as ns,Q as X,t as y,v as P,S as as,U as le,o as a,J as ls}from"./vue-q1_PGPlY.js";import{H as os,M as D}from"./Header-Dj5am3yu.js";import{u as is,w as us,V as m,g as _e,W as ds,C as oe}from"./util-DZamdUmE.js";import{s as rs}from"./index-Ca_GRw5L.js";import{_ as cs}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./xterm-CbIsyoms.js";import"./monaco-D2fC6ZYY.js";const vs={class:"main"},ps={class:"student-assignment-cont"},ms={class:"assignment-info"},gs={class:"flex-sb al-c"},fs={key:0,class:"instructions"},Cs={class:"txt-subtle"},ys={class:"lesson-list"},bs={key:0,class:"txt-subtle"},hs={class:"lesson-info"},_s={class:"lesson-name"},ks=["onClick"],ws={class:"flex-col student-class-cont"},xs={class:"student-class-header flex-sb"},Ss={class:"join-code-cont"},Ds={ref:"copyJoinCode"},Is={class:"student-class-grid"},As={class:"flex-col gp05"},Ms={class:"instructor-packet"},Us={class:"flex al-c"},Ts=["src"],Ls={class:"instructor-label"},js={class:"flex cell"},Ps={key:0,class:"material-symbols-outlined"},Ns={key:0},Es={class:"flex-col gp05"},Os={class:"assignments-full assignment"},Vs={class:"flex-sb al-c"},Rs={class:"flex gp05"},Js={class:"material-symbols-outlined status-icon"},$s=["onClick"],Gs={key:0,class:"txt-subtle pd051"},qs={class:"view-assignment-cont"},Bs={class:"cell student-name flex-st"},Fs=["src"],Hs={class:"assignment-options-cont"},zs={key:0,class:"error-message"},Ws={key:1,class:"error-message"},Qs={key:2},Ys={class:"lesson-checkboxes"},Zs=["value"],Ks={class:"flex"},Xs={class:"flex"},et={key:0,for:"assignmentPublishDate"},st={key:0,class:"error-message"},tt={class:"join-menu-cont"},nt={key:0,class:"error-message"},at={class:"class-options-cont"},lt={class:"flex-sb"},ot={key:0,class:"error-message"},it={class:"flex-col"},ut={class:"banned-users"},dt={key:0,class:"txt-subtle"},rt={class:"flex banned-user"},ct=["onClick"],vt={class:"manage-class-container"},pt={class:"manage-class-header"},mt={class:"join-code-cont"},gt=["co-label"],ft={ref:"copyJoinCode"},Ct={class:"manage-class-body"},yt={class:"manage-class-left"},bt={key:0,class:"student-container"},ht={key:1,class:"student-container"},_t={class:"student-item"},kt={class:"flex-st"},wt=["src"],xt=["onClick"],St={class:"manage-class-right"},Dt={key:0,class:"assignments-empty assignment"},It={class:"assignments-full assignment"},At={class:"flex-sb al-c"},Mt={class:"flex gp05"},Ut=["co-label"],Tt=["onClick"],Lt=["onClick"],jt={key:0,class:"txt-subtle pd051"},Pt={class:"classes"},Nt={class:"class-header"},Et={key:0,class:"header-right"},Ot={key:1,class:"header-right"},Vt={class:"class-bottom"},Rt={class:"selection-opx"},Jt=["onClick"],$t={key:0,class:"empty-container"},Gt={class:"card"},qt={class:"card-left"},Bt={class:"instructor"},Ft={class:"card-right"},Ht=["onClick"],zt={key:2,class:"empty-container"},Wt={key:0},Qt={class:"card"},Yt={key:0,class:"card-left"},Zt={class:"card-right"},Kt=["onClick"],Xt=Xe({__name:"ClassesView",setup(en){const ie=is(),b=o([]),f=o([]);let h=o(!0);const I=o(!1);function ke(){I.value&&(h.value=!h.value)}let A=o(!1);const c=o();let we=J("createClassMenu");async function xe(){M.value="";const n=new Date().toISOString().split("T")[0],e=new Date;e.setMonth(e.getMonth()+2);const t=e.toISOString().split("T")[0];c.value={name:"",students:[],instructor:{name:"",uid:void 0,pfpURL:void 0},assignments:[],publishDate:n,endDate:t,isLocked:!1,bannedUsers:[]},A.value=!A.value}const M=o("");async function Se(){if(M.value="",!c.value.name||!c.value.publishDate||!c.value.endDate){M.value="Missing required fields";return}if(c.value.name.length<6){M.value="Class name must be at least 6 characters";return}if(c.value.endDate<=c.value.publishDate){M.value="End date must be after publish date";return}await De(ls(c.value)),A.value=!1}async function De(n){console.log("Sending request to create class...");try{let e=await m("POST","/classes",{autoToken:!0,body:n});console.log("Server (post class): ",e.data),f.value.push(e.data)}catch(e){console.log("Could not create class: ",e)}}async function ue(n){try{let e=await m("GET","/classes/",{query:{instructorClasses:n}});if(e.code!=500)return e.data}catch(e){return console.log("Could not create assignment: ",e),[]}}const U=o(!1),N=o("");J("joinClassMenu");async function de(){N.value="",U.value=!U.value}const E=o("");async function Ie(){const n=N.value.trim();if(E.value="",n.length!==6){console.error("Join code must be exactly 6 characters");return}await Ae(n)}async function Ae(n){try{let e=await m("PATCH","/classes/join/:joinCode",{params:{joinCode:n}});if(console.log("Server (join class): ",e),e.code===403){E.value=e.text;return}if(e.code!==200||!e.data){console.error("Join failed",e.text),E.value=e.text||"Unknown error...";return}b.value.push(e.data),U.value=!1}catch(e){console.log("Could not join class: ",e)}}const re=o(0),Me=[{name:"ONGOING CLASSES",index:0},{name:"UPCOMING CLASSES",index:1},{name:"PAST CLASSES",index:2}],ee=o(),se=o();function Ue(n){switch(re.value=n,n){case 1:se.value=f.value.filter(e=>e.publishDate.getTime()<=new Date().getTime()),ee.value=b.value.filter(e=>e.publishDate.getTime()<=new Date().getTime());case 2:se.value=f.value.filter(e=>e.publishDate.getTime()>new Date().getTime()),ee.value=b.value.filter(e=>e.publishDate.getTime()>new Date().getTime());case 3:se.value=f.value.filter(e=>e.endDate.getTime()<new Date().getTime()),ee.value=b.value.filter(e=>e.endDate.getTime()<new Date().getTime())}}es(async()=>{await us()&&(b.value=await ue(!1),console.log("Fetched student classes ",b.value),I.value=ie.g_user.data.isInstructor,I.value&&(h.value=!0,f.value=await ue(!0),console.log("Fetched instructor classes ",f.value)),console.log("instructor status: "+I.value))});const T=o(!1),d=o(),ce=o("");J("manageClassMenu");async function Te(n){d.value=n,ce.value=n.name.toString(),T.value=!T.value,O.value=await ve(n._id),await _e(0).then(async()=>{await ds()})}const O=o();async function ve(n){try{let e=await m("GET","/classes/:classId/assignments",{params:{classId:n}});if(console.log("Server (get assignments): ",e),e.code!==200||!e.data){console.error("Fetch assignments failed",e.text);return}return e.data}catch(e){console.log("Could not join class: ",e)}}async function pe(n,e){new oe("<div style='display:flex;gap:1em;padding-top:1rem;'><span class='material-symbols-outlined'>gavel</span><span>Ban user</span></div>","<div style='display:flex;padding:0.5em 1em;'>Are you sure you want to ban this user?</div>",async()=>{await Le(n,e)},()=>{},"Ban user","Cancel").load()}async function Le(n,e){try{let t=await m("PATCH","/classes/:classId/ban",{params:{classId:d.value._id},query:{banUser:e,banning:n}});t.data&&(d.value.students=t.data.students,d.value.bannedUsers=t.data.bannedUsers),console.log("Server (ban user): ",t.data)}catch(t){console.log("Could not join class: ",t)}}async function je(){d.value.isLocked=!d.value.isLocked,await Pe({isLocked:d.value.isLocked})}async function Pe(n){let e=n;try{let t=await m("PATCH","/classes/:classId",{params:{classId:d.value._id},body:e});console.log("Server (edit class): ",t),b.value.find(r=>{r._id===t.data._id&&(r=t.data)}),U.value=!1}catch(t){console.log("Could not join class: ",t)}}async function me(){E.value="",$.value="",G.value=""}function te(n){const e=encodeURIComponent(n);return`${rs}/proxy?url=${e}`}J("createAssignmentMenu");const L=o(!1),g=o(),ne=o("Lessons"),z=o(!0),ge=o();async function Ne(){j.value=!1,g.value={name:"",publishDate:new Date,classId:void 0,dueDate:new Date,completions:[],assignedContent:{instructions:"",lessons:[],projects:[],challenges:[]}},L.value=!L.value;try{let n=await m("GET","/classes/:classId/lessons",{params:{classId:d.value._id}});console.log("Server (get lesson data): ",n),ge.value=n.data}catch(n){console.log("Could not get lesson metadata: ",n)}}const $=o(""),G=o(""),W=o("");async function Ee(){if(g.value.name.length<3){$.value="Assignment name must be 3 characters";return}else if(g.value.assignedContent.instructions.length<3){G.value="Please add instructions";return}else W.value="",G.value="",$.value="";try{let n=await m("POST","/classes/:classId/assignments",{params:{classId:d.value._id},body:g.value});if(!n.ok||!n.data){n.code==400&&(W.value="Please specify assignment content."),console.warn("Could not create assignment",n.code,"data: "+n.text);return}console.log("Server (create assignment): ",n),d.value.assignments.push(n.data._id),O.value.push(n.data),L.value=!1}catch(n){console.log("Could not create assignment: ",n)}}async function Oe(n){new oe("<div style='display:flex;gap:1em;padding-top:1rem;'><span class='material-symbols-outlined'>delete</span><span>Delete Assignment</span></div>","<div style='display:flex;padding:0.5em 1em;'>Are you sure you want to delete this assignment?</div>",async()=>{try{let e=await m("DELETE","/classes/:classId/assignments/:assignmentId",{params:{classId:d.value._id,assignmentId:n}});if(e.ok){let t=O.value.findIndex(r=>r._id==n);t!=-1&&O.value.splice(t,1),t=d.value.assignments.indexOf(n),t!=-1&&d.value.assignments.splice(t,1)}console.log("Server (delete assignment): ",e.data)}catch(e){console.log("Could not join class: ",e)}},()=>{},"Delete Assignment","Cancel").load()}const j=o(!1),Ve=J("classSettingsMenu");async function Re(){L.value=!1,j.value=!j.value}async function Je(){T.value=!1,j.value=!1,new oe("<div style='display:flex;gap:1em;padding-top:1rem;'><span class='material-symbols-outlined'>delete</span><span>Delete Class</span></div>","<div style='display:flex;padding:0.5em 1em;'>Are you sure you want to delete this class?</div>",async()=>{let n=d.value;try{let e=await m("DELETE","/classes/:classId",{params:{classId:n._id}});if(e.ok){let t=f.value.indexOf(n);t!=-1&&f.value.splice(t,1)}console.log("Server (delete class): ",e.data)}catch(e){console.log("Could not delete class: ",e)}},()=>{},"Delete Class","Cancel").load()}const V=o(),fe=o("Assignment Details"),Ce=o(),k=o(),ye=o([]);async function $e(n){V.value=!V.value,k.value=O.value.find(e=>e._id==n),fe.value=k.value.name+": Info",V.value&&await Ge()}async function Ge(){try{let n=await m("PATCH","/classes/:classId/assignments/:assignmentId/",{body:{lessons:k.value.assignedContent.lessons,challenges:k.value.assignedContent.challenges,projects:k.value.assignedContent.projects},params:{classId:d.value._id,assignmentId:k.value._id}});if(n.code>=299)if(n.code==400){console.error("No students in class",n.text);return}else{console.error("Unknown error getting assignment completion details",n.text);return}Ce.value=n.data.details,ye.value=n.data.lessondata,console.log("Sever response (get assignment completion details): ",n.data)}catch(n){console.log("Could not get assignment completion details",n)}}const be=J("copyJoinCode");async function he(){be.value.textContent="Copied!";let n;T.value?n=d.value.joinCode:R.value&&(n=w.value.joinCode);try{await navigator.clipboard.writeText(n),console.log("Class joincode copied")}catch(e){console.error("Could not copy join code: ",e)}await _e(700),be.value.textContent="Copy"}function qe(n,e){const t=n.lessonsCompleted.find(r=>r.lid===e);return t?t.isCompleted?"Complete":"In progress":"Not started"}function Be(n){const e=ye.value.find(t=>t.lid===n);return e?e.name:"Unknown lesson"}const w=o(),Q=o(),R=o(!1),Y=o(new Map);async function Fe(n){if(R.value=!R.value,w.value=n,Q.value=await ve(n._id),Q.value){Y.value.clear();for(const e of Q.value)await He(n._id,e)}}async function He(n,e){try{let t=await m("GET","/classes/:classId/assignments/:assignmentId/completion",{params:{classId:n,assignmentId:e._id}});if(t.ok&&t.data){const r=t.data.lessons;Y.value.set(e._id,{completed:r.filter(H=>H.state==="completed").length,started:r.filter(H=>H.state==="started").length,notStarted:r.filter(H=>H.state==="not_started").length,total:r.length})}}catch(t){console.log("Could not get completion data for assignment:",e._id,t)}}function ze(n){return Y.value.get(n)?.completed??0}function ae(n){const e=Y.value.get(n);return!e||e.total===0?"not_started":e.completed===e.total?"completed":e.completed>0||e.started>0?"in_progress":"not_started"}const q=o(!1);async function We(){q.value=!q.value}const Z=o(!1),B=o(),F=o([]);async function Qe(n){B.value=n,Z.value=!0;try{let e=await m("GET","/classes/:classId/assignments/:assignmentId/completion",{params:{classId:w.value._id,assignmentId:n._id}});e.ok&&e.data?(F.value=e.data.lessons,console.log("Server (get student assignment completion): ",e.data)):(console.error("Failed to get assignment completion",e.text),F.value=[])}catch(e){console.log("Could not get assignment completion: ",e),F.value=[]}}function Ye(n){switch(n){case"not_started":return"Not Started";case"started":return"In Progress";case"completed":return"Completed";default:return"Unknown"}}function Ze(n){switch(n){case"not_started":return"state-not-started";case"started":return"state-started";case"completed":return"state-completed";default:return""}}function Ke(n){window.location.href=`/learn?lid=${n}`}return(n,e)=>(a(),l(v,null,[ss(os,{"btn-index":3}),s("div",vs,[Z.value?(a(),x(D,{key:0,ref:"studentAssignmentMenu",title:B.value?.name||"Assignment",opened:Z.value,"onUpdate:opened":e[0]||(e[0]=t=>Z.value=t),icon:"assignment",height:"min-content",width:"400px","new-layer":!0},{default:S(()=>[s("div",ps,[s("div",ms,[s("div",gs,[e[24]||(e[24]=s("span",{class:"usn"},"Due Date:",-1)),s("span",null,i(new Date(B.value?.dueDate).toLocaleDateString()),1)]),B.value?.assignedContent.instructions?(a(),l("div",fs,[e[25]||(e[25]=s("span",{class:"usn"},"Instructions:",-1)),s("span",Cs,i(B.value.assignedContent.instructions),1)])):u("",!0)]),s("div",ys,[e[27]||(e[27]=s("h3",null,"Assigned Lessons:",-1)),F.value.length===0?(a(),l("div",bs," Loading lessons... ")):u("",!0),(a(!0),l(v,null,p(F.value,t=>(a(),l("div",{key:t.lid,class:"lesson-item"},[s("div",hs,[s("span",_s,i(t.name),1),s("span",{class:K(["lesson-state",Ze(t.state)])},i(Ye(t.state)),3)]),s("button",{onClick:r=>Ke(t.lid),class:"go-to-lesson"},[s("span",null,i(t.state==="completed"?"Review":"Start"),1),e[26]||(e[26]=s("span",{class:"material-symbols-outlined"},"arrow_right_alt",-1))],8,ks)]))),128))])])]),_:1},8,["title","opened"])):u("",!0),R.value?(a(),x(D,{key:1,ref:"studentClassMenu",title:w.value.name,opened:R.value,"onUpdate:opened":e[1]||(e[1]=t=>R.value=t),icon:"Group",height:"min-content",width:"max-content"},{default:S(()=>[s("div",ws,[s("div",xs,[s("div",Ss,[e[29]||(e[29]=s("span",{class:"usn"},"Join Code: ",-1)),s("span",null,i(w.value.joinCode),1),s("button",{onClick:he},[s("span",Ds,"Copy",512),e[28]||(e[28]=s("span",{class:"material-symbols-outlined"},"content_copy",-1))])]),s("div",{class:"edit-class-cont"},[s("button",{onClick:We},e[30]||(e[30]=[C(" Class Settings "),s("span",{class:"material-symbols-outlined"},"settings",-1)]))])]),s("div",Is,[s("div",As,[e[32]||(e[32]=s("h3",null,"People: ",-1)),s("div",Ms,[s("div",Us,[s("img",{src:te(w.value.instructor.pfpURL||""),alt:"Instructor profile picture",crossorigin:"",class:"student-pfp"},null,8,Ts),s("span",Ls,i(w.value.instructor.name),1)])]),(a(!0),l(v,null,p(w.value.students,t=>(a(),l("div",null,[s("span",js,[s("span",null,[C(i(t.name),1),t.studentId.toString()===_(ie).g_user.data.uid?(a(),l("span",Ps,"person")):u("",!0)])])]))),256)),w.value.students.length<=0?(a(),l("div",Ns,e[31]||(e[31]=[s("span",{class:"flex cell"}," You shouldn't be seeing this... paul messed up somewhere ",-1)]))):u("",!0)]),s("div",Es,[e[34]||(e[34]=s("h3",null,"Assignments: ",-1)),(a(!0),l(v,null,p(Q.value,t=>(a(),l("div",Os,[s("div",Vs,[s("span",null,i(t.name),1),s("div",Rs,[s("div",{class:K(["flex al-c gp05 assignment-status","status-"+ae(t._id)])},[s("span",Js,i(ae(t._id)==="completed"?"done_all":ae(t._id)==="in_progress"?"pending":"radio_button_unchecked"),1),s("span",null,i(ze(t._id))+" / "+i(t.assignedContent.lessons.length),1)],2),s("button",{class:"view-assignment",onClick:r=>Qe(t)},e[33]||(e[33]=[C(" View "),s("span",{class:"material-symbols-outlined"},"info",-1)]),8,$s)])]),t.assignedContent.instructions?(a(),l("span",Gs,i(t.assignedContent.instructions),1)):u("",!0)]))),256))])])])]),_:1},8,["title","opened"])):u("",!0),q.value?(a(),x(D,{key:2,ref:"studentClassSettingsMenu",title:"Class Settings",opened:q.value,"onUpdate:opened":e[2]||(e[2]=t=>q.value=t),icon:"settings",height:"150px",width:"380px"},{default:S(()=>e[35]||(e[35]=[s("div",{class:"flex-col"},[s("div",{class:"flex-st"}," Nothing here yet, paul's working on it :) ")],-1)])),_:1,__:[35]},8,["opened"])):u("",!0),V.value?(a(),x(D,{key:3,ref:"viewAssignmentMenu",title:fe.value,opened:V.value,"onUpdate:opened":e[3]||(e[3]=t=>V.value=t),icon:"info",height:"min-content",width:"max-content","new-layer":!0},{default:S(()=>[s("div",qs,[s("div",{class:"details-grid",style:ns({"--lesson-count":k.value?.assignedContent.lessons.length||1})},[e[36]||(e[36]=s("div",{class:"header-cell"},"Student",-1)),(a(!0),l(v,null,p(k.value?.assignedContent.lessons,t=>(a(),l("div",{key:t,class:"header-cell"},i(Be(t)),1))),128)),(a(!0),l(v,null,p(Ce.value,t=>(a(),l(v,{key:t.student.id},[s("div",Bs,[s("img",{src:te(t.student.pfpURL),alt:"Student profile picture",crossorigin:"",class:"student-pfp"},null,8,Fs),s("span",null,i(t.student.name),1)]),(a(!0),l(v,null,p(k.value?.assignedContent.lessons,r=>(a(),l("div",{key:r,class:"cell"},i(qe(t,r)),1))),128))],64))),128))],4)])]),_:1},8,["title","opened"])):u("",!0),L.value?(a(),x(D,{key:4,ref:"createAssignmentMenu",title:"Create Assignment",opened:L.value,"onUpdate:opened":e[10]||(e[10]=t=>L.value=t),icon:"assignment_add",height:"min-content",width:"400px",onOnClose:e[11]||(e[11]=t=>me())},{default:S(()=>[s("form",{class:"assignment-menu-cont",onSubmit:X(Ee,["prevent"])},[s("div",Hs,[e[40]||(e[40]=s("label",{for:"assignmentName"},"Name: ",-1)),y(s("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>g.value.name=t),placeholder:"Assignment Name",id:"assignmentName",class:"assignment-input",type:"text",minlength:"3",required:""},null,512),[[P,g.value.name,void 0,{trim:!0}]]),$.value?(a(),l("span",zs,i($.value),1)):u("",!0),e[41]||(e[41]=s("label",{for:"assignmentInstructions"},"Instructions:",-1)),y(s("input",{type:"text",id:"assignmentInstructions",required:"","onUpdate:modelValue":e[5]||(e[5]=t=>g.value.assignedContent.instructions=t),placeholder:"Complete the following work",minlength:"2",maxlength:"1024"},null,512),[[P,g.value.assignedContent.instructions,void 0,{trim:!0}]]),G.value?(a(),l("span",Ws,i(G.value),1)):u("",!0),e[42]||(e[42]=s("label",{for:"assignmentContent"},"Assignment Type: ",-1)),y(s("select",{id:"assignmentContent",required:"",class:"assignment-content","onUpdate:modelValue":e[6]||(e[6]=t=>ne.value=t)},e[37]||(e[37]=[s("option",{value:"Lessons"},"Lesson",-1),s("option",{disabled:"",value:"Challenges"},"Challenge",-1),s("option",{disabled:"",value:"Projects"},"Project",-1)]),512),[[as,ne.value]]),ne.value==="Lessons"?(a(),l("div",Qs,[e[38]||(e[38]=s("label",null,"Select lesson(s) to assign:",-1)),s("div",Ys,[(a(!0),l(v,null,p(ge.value,t=>(a(),l("label",{key:t.lid},[y(s("input",{type:"checkbox",value:t.lid,"onUpdate:modelValue":e[7]||(e[7]=r=>g.value.assignedContent.lessons=r)},null,8,Zs),[[le,g.value.assignedContent.lessons]]),C(" "+i(t.name),1)]))),128))])])):u("",!0),s("div",Ks,[e[39]||(e[39]=s("label",{for:"assignmentPublishNow"},"Publish now?",-1)),y(s("input",{type:"checkbox",id:"assignmentPublishNow","onUpdate:modelValue":e[8]||(e[8]=t=>z.value=t)},null,512),[[le,z.value]])]),s("div",Xs,[z.value?u("",!0):(a(),l("label",et," Publish At: ")),z.value?u("",!0):y((a(),l("input",{key:1,"onUpdate:modelValue":e[9]||(e[9]=t=>g.value.publishDate=t),id:"assignmentPublishDate",class:"assignment-date-input",type:"date",required:""},null,512)),[[P,g.value.publishDate]])])]),e[43]||(e[43]=s("button",{type:"submit",class:"assignment-submission"},[s("span",null,"Create assignment "),s("span",{class:"material-symbols-outlined"},"arrow_right_alt")],-1)),W.value.length>=1?(a(),l("span",st,i(W.value),1)):u("",!0)],32)]),_:1},8,["opened"])):u("",!0),U.value?(a(),x(D,{key:5,ref:"joinClassMenu",title:"Join Class",opened:U.value,"onUpdate:opened":e[14]||(e[14]=t=>U.value=t),icon:"Group",height:"min-content",width:"max-content",onOnClose:me},{default:S(()=>[s("div",tt,[e[46]||(e[46]=s("span",null,"Enter 6-digit code to join a class:",-1)),s("form",{class:"join-options-cont",onSubmit:X(Ie,["prevent"])},[y(s("input",{"onUpdate:modelValue":e[12]||(e[12]=t=>N.value=t),class:"join-input",type:"text",placeholder:"QRF234",maxlength:"6",minlength:"6",pattern:"[A-Z0-9]{6}",required:"",onInput:e[13]||(e[13]=t=>N.value=N.value.toUpperCase().trim())},null,544),[[P,N.value]]),e[44]||(e[44]=s("button",{type:"submit",class:"material-symbols-outlined join-submission"}," arrow_right_alt ",-1))],32),E.value?(a(),l("span",nt,[e[45]||(e[45]=s("span",{class:"material-symbols-outlined"},"lock",-1)),C(i(E.value),1)])):u("",!0)])]),_:1},8,["opened"])):u("",!0),_(A)?(a(),x(D,{key:6,ref_key:"createClassMenu",ref:we,title:"Create Class",opened:_(A),"onUpdate:opened":e[19]||(e[19]=t=>ts(A)?A.value=t:A=t),icon:"Group",height:"min-content",width:"400px"},{default:S(()=>[s("form",{class:"class-menu-cont",onSubmit:X(Se,["prevent"])},[s("div",at,[e[48]||(e[48]=s("label",{for:"className"},"Name: ",-1)),y(s("input",{"onUpdate:modelValue":e[15]||(e[15]=t=>c.value.name=t),placeholder:"Class Name",id:"className",class:"class-input",type:"text",minlength:"6",required:""},null,512),[[P,c.value.name,void 0,{trim:!0}]]),e[49]||(e[49]=s("label",{for:"classPublishDate"},"Publish Date: ",-1)),y(s("input",{"onUpdate:modelValue":e[16]||(e[16]=t=>c.value.publishDate=t),id:"classPublishDate",class:"class-date-input",type:"date",required:""},null,512),[[P,c.value.publishDate]]),e[50]||(e[50]=s("label",{for:"classEndDate"},"End Date: ",-1)),y(s("input",{"onUpdate:modelValue":e[17]||(e[17]=t=>c.value.endDate=t),id:"classEndDate",class:"class-date-input",type:"date",required:""},null,512),[[P,c.value.endDate]]),s("div",lt,[e[47]||(e[47]=s("label",{for:"classIsLocked"},"Disable join code: ",-1)),y(s("input",{"onUpdate:modelValue":e[18]||(e[18]=t=>c.value.isLocked=t),id:"classIsLocked",class:"class-is-locked",type:"checkbox"},null,512),[[le,c.value.isLocked]])])]),e[51]||(e[51]=s("button",{type:"submit",class:"class-submission"},[s("span",null,"Create class "),s("span",{class:"material-symbols-outlined"},"arrow_right_alt")],-1)),M.value?(a(),l("span",ot,i(M.value),1)):u("",!0)],32)]),_:1},8,["opened"])):u("",!0),j.value?(a(),x(D,{key:7,ref_key:"classSettingsMenu",ref:Ve,title:"Class Settings",opened:j.value,"onUpdate:opened":e[20]||(e[20]=t=>j.value=t),icon:"settings",height:"min-content",width:"380px"},{default:S(()=>[s("div",it,[s("div",ut,[e[53]||(e[53]=s("div",{class:"flex-st"},[s("span",{class:"material-symbols-outlined"}," manage_accounts "),C(" Banned Users ")],-1)),d.value.bannedUsers.length<=0?(a(),l("div",dt," Good news... No banned users! ")):(a(!0),l(v,{key:1},p(d.value.bannedUsers,t=>(a(),l("div",rt,[s("span",null,i(t.name),1),s("button",{class:"warn",onClick:r=>pe(!1,t._id)},e[52]||(e[52]=[C(" Unban "),s("span",{class:"material-symbols-outlined"},"gavel",-1)]),8,ct)]))),256))]),s("button",{class:"warn",onClick:Je},e[54]||(e[54]=[C(" Delete Class"),s("span",{class:"material-symbols-outlined"},"delete",-1)]))])]),_:1},8,["opened"])):u("",!0),T.value?(a(),x(D,{key:8,ref:"manageClassMenu",title:ce.value,opened:T.value,"onUpdate:opened":e[21]||(e[21]=t=>T.value=t),icon:"Group",height:"min-content",width:"max-content"},{default:S(()=>[s("div",vt,[s("div",pt,[s("div",mt,[e[56]||(e[56]=s("span",{class:"usn"},"Join Code: ",-1)),s("span",null,i(d.value.joinCode.toUpperCase()),1),s("button",{onClick:je},[s("div",{class:"material-symbols-outlined co-item","co-label":d.value.isLocked?"Class Locked":"Class Unlocked"},i(d.value.isLocked?"lock":"lock_open_right"),9,gt)]),s("button",{onClick:he},[s("span",ft,"Copy",512),e[55]||(e[55]=s("span",{class:"material-symbols-outlined"},"content_copy",-1))])]),s("div",{class:"edit-class-cont"},[s("button",{onClick:Re},e[57]||(e[57]=[C(" Class Settings "),s("span",{class:"material-symbols-outlined"},"settings",-1)]))])]),s("div",Ct,[s("div",yt,[e[59]||(e[59]=s("div",{class:"flex-sb al-c"},[s("h3",null,"Students:"),s("button",{style:{visibility:"hidden"}},[s("span",{class:"material-symbols-outlined"},"add")])],-1)),d.value.students.length<=0?(a(),l("div",bt,e[58]||(e[58]=[s("span",{class:"student-item"},"No students",-1)]))):(a(),l("div",ht,[(a(!0),l(v,null,p(d.value.students,t=>(a(),l("div",_t,[s("span",kt,[s("img",{crossorigin:"",src:te(t.pfpURL),alt:"Profile Picture",ref_for:!0,ref:"userProfilePicture",class:"student-pfp"},null,8,wt),s("span",null,i(t.name),1)]),s("button",{class:"material-symbols-outlined warn",onClick:r=>pe(!0,t.studentId.toString())}," gavel ",8,xt)]))),256))]))]),s("div",St,[s("div",{class:"flex-sb al-c"},[e[61]||(e[61]=s("h3",null,"Assignments:",-1)),s("button",{onClick:Ne},e[60]||(e[60]=[C(" Create "),s("span",{class:"material-symbols-outlined"},"add",-1)]))]),d.value.assignments.length<=0?(a(),l("div",Dt,e[62]||(e[62]=[s("span",null,"Nothing to see here... Click the '+' icon to create an assignment! ",-1)]))):(a(!0),l(v,{key:1},p(O.value,t=>(a(),l("div",It,[s("div",At,[s("span",null,i(t.name),1),s("div",Mt,[s("div",{class:"material-symbols-outlined co-item visibility","co-label":t.published?"Published":"Not yet published"},i(t.published?"visibility":"visibility_off"),9,Ut),s("button",{class:"view-assignment",onClick:r=>$e(t._id)},e[63]||(e[63]=[C(" View "),s("span",{class:"material-symbols-outlined"},"info",-1)]),8,Tt),s("button",{class:"material-symbols-outlined delete warn",onClick:X(r=>Oe(t._id),["stop"])}," delete ",8,Lt)])]),t.assignedContent.instructions?(a(),l("span",jt,i(t.assignedContent.instructions),1)):u("",!0)]))),256))])])])]),_:1},8,["title","opened"])):u("",!0),s("div",Pt,[s("div",Nt,[e[66]||(e[66]=s("div",{class:"header-left"},[s("span",{class:"material-symbols-outlined header-icon"},"group"),s("h1",null,"CLASS DASHBOARD")],-1)),I.value?(a(),l("div",Et,[s("button",{onClick:ke}," INSTRUCTOR VIEW "+i(_(h)?"(on)":"(off)"),1),s("button",{class:"newButton",onClick:e[22]||(e[22]=t=>_(h)?xe():de())},[s("span",null,i(_(h)?"CREATE":"JOIN")+" CLASS",1),e[64]||(e[64]=s("span",{class:"material-symbols-outlined"},"add",-1))])])):(a(),l("div",Ot,[s("button",{class:"newButton",onClick:e[23]||(e[23]=t=>de())},e[65]||(e[65]=[s("span",null,"JOIN CLASS",-1),s("span",{class:"material-symbols-outlined"},"add",-1)]))]))]),s("div",Vt,[s("div",Rt,[(a(),l(v,null,p(Me,t=>s("span",{class:K([{active:re.value===t.index},"class-category"]),key:t.index,onClick:r=>Ue(t.index)},i(t.name),11,Jt)),64))]),s("div",{class:K(["class-container",{"instructor-classes":_(h),"student-classes":!_(h)}])},[I.value&&_(h)&&f.value.length<=0?(a(),l("div",$t,e[67]||(e[67]=[s("span",null,"This is where you'll manage the classes for which you're an instructor.",-1),s("span",null,'Click the "Create Class" button to get started!',-1)]))):I.value&&_(h)&&f.value.length>=1?(a(!0),l(v,{key:1},p(f.value,t=>(a(),l("div",Gt,[s("div",qt,[s("h3",null,i(t.name),1),s("span",Bt,"Instructor: "+i(t.instructor.name),1)]),s("div",Ft,[s("button",{onClick:r=>Te(t)}," Manage Class ",8,Ht)])]))),256)):b.value.length<=0?(a(),l("div",zt,[e[68]||(e[68]=s("span",null,`You're not in any classes yet! Ask your instructor for a join code and click "Join Class" to get started.`,-1)),I.value?(a(),l("span",Wt,"Psst - We see you're an instructor! If you're looking to create/manage classes, click on the instructor view toggle.")):u("",!0)])):(a(),l(v,{key:3},[b.value.length>=1?(a(!0),l(v,{key:0},p(b.value,t=>(a(),l("div",Qt,[t.published?(a(),l("div",Yt,[s("h3",null,i(t.name),1),s("span",null,"Professor: "+i(t.instructor.name),1)])):u("",!0),s("div",Zt,[s("button",{onClick:r=>Fe(t)}," View Class ",8,Kt)])]))),256)):u("",!0)],64))],2)])])])],64))}}),dn=cs(Xt,[["__scopeId","data-v-9f6f86a5"]]);export{dn as default};
