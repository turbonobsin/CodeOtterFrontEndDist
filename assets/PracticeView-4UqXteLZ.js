import{M as B,I as U,k as H,H as j}from"./Header--D8NROq8.js";import{u as P,s as O,d as V,i as W}from"./practice-ClPwgsvL.js";import{u as R,f as p,U as F,x as T,g as A,l as G,b as D}from"./util-BOdJUwkE.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as y,o as i,G as Y,d as I,C as q,i as v,t as J,u as l,A as u,a,H as K,x as o,b,y as z,l as Q,m as X,p as Z,F as ee}from"./vue-BJ2jqJ1-.js";/* empty css                                                                  */import"./index-CW6-FViY.js";import"./monaco-D2fC6ZYY.js";import"./xterm-CbIsyoms.js";const te={},se={class:"inline-highlight-item"};function le(_,t){return i(),y("span",se,[Y(_.$slots,"default",{},void 0,!0)])}const M=E(te,[["render",le],["__scopeId","data-v-1edbc8d1"]]),ae={key:0,style:{position:"relative"}},oe={class:"progress-cont"},ie=["step-done"],ne={class:"space-200"},de=["disabled"],re=["step-done"],ce=["gray-out"],ue=["step-done"],pe=["gray-out"],fe={key:1},he=I({__name:"UploadForChallengeMenu",setup(_){const t=P(),k=R();async function f(s){let e=t.challengeUpload;e&&s.target.files.length!=0&&(await p(500),e.step=1,await p(500),e.progress=0,e.files=s.target.files,e.status="pending",await L())}async function L(){let s=t.challengeUpload;if(!s)return;console.log("uploading files...",s.files);let e=await O(s.cid,!1);if(e==null){s.status="failure",alert("Sorry we couldn't create a new challenge project for you to upload to, please try again later or send us feedback to notify us of the issue.");return}let d=new F("root"),h=0,w=!1;async function C(){if(h==0)return;if(!new Promise(n=>{A.emit("uploadProjectFiles",k.g_user.data.uid,e,d.items??[],c=>{c?(console.warn("couldn't upload file to challenge project",c),n(!1)):n(!0)})})){w=!0;return}h=0}let S=0;for(const r of s.files){if(S++,h+r.size>9e6&&await C(),w)break;h+=r.size,s.progress=S/s.files.length;let n=r.webkitRelativePath;if(n.includes("node_modules")||n.endsWith(".sh")||n.endsWith(".exe"))continue;let c=n.split("/");c.pop(),c.shift();let x=d;for(const g of c){let m=d.items.find($=>$.name==g);m||(m=new F(g),d.items.push(m)),x=m}if(x){let g=new T(r.name,new Uint8Array(await r.arrayBuffer()??[]));x.items.push(g)}}if(await C(),w){s.status="failure",confirm(`We failed to upload all the items, so we're aborting the whole upload. Would you like to delete all the uploaded files and try again?

Otherwise, you can view the incomplete uploaded project under the Experiment tab.`)&&await V(s.cid);return}await p(250),s.progress=1,s.step=2,s.status="pending",console.log("all items uploaded successfully to the challenge project"),console.log("submitting project..."),await H(s.cid,e,!1),console.log("success"),await p(500),s.status="success",await p(1e3),location.href=`/practice/submissions/?cid=${s.cid}&pid=${e}`}const N=q(()=>`${t.challengeUpload.step/2*100}%`);return(s,e)=>l(t).challengeMenuOpen?(i(),v(B,{key:0,ref:"upload_challenge_files",title:"Upload files for Challenge",opened:l(t).challengeMenuOpen,"onUpdate:opened":e[0]||(e[0]=d=>l(t).challengeMenuOpen=d),icon:"upload",width:"700px",height:"max-content","new-layer":!0,"custom-on-close":()=>(l(t).closeChallengeMenu(),!0)},{default:u(()=>[l(t).challengeUpload?(i(),y("div",ae,[a("div",oe,[a("div",{class:"progress-bar",style:K({height:N.value})},null,4)]),a("ol",null,[a("li",{"step-done":l(t).challengeUpload.step>0},[a("div",ne,[a("h3",null,[e[3]||(e[3]=o("Please select the ")),b(M,null,{default:u(()=>e[1]||(e[1]=[o("folder")])),_:1,__:[1]}),e[4]||(e[4]=o(" that contains your ")),b(M,null,{default:u(()=>e[2]||(e[2]=[o("index.html")])),_:1,__:[2]}),e[5]||(e[5]=o(" file."))]),a("input",{type:"file",name:"upload_folder",id:"upload_folder",webkitdirectory:"true",onChange:f,disabled:l(t).challengeUpload.files.length!=0},null,40,de)])],8,ie),a("li",{"step-done":l(t).challengeUpload.step>1},[a("div",{class:"space-200","gray-out":l(t).challengeUpload.step<1},[a("h3",null,"Uploading "+z(l(t).challengeUpload.files.length)+" files...",1),a("h2",null,z((l(t).challengeUpload.progress*100).toFixed(0))+"%",1)],8,ce)],8,re),a("li",{"step-done":l(t).challengeUpload.step>=2&&l(t).challengeUpload.status=="success"},[a("div",{class:"flx-al",style:{gap:"10px",display:"flex"},"gray-out":l(t).challengeUpload.step<2},[e[9]||(e[9]=a("h3",null,"Submit",-1)),l(t).challengeUpload.status=="pending"?(i(),v(U,{key:0,loading:!0,style:{color:"var(--darken0)","font-size":"1.75em"}},{default:u(()=>e[6]||(e[6]=[o("progress_activity")])),_:1,__:[6]})):l(t).challengeUpload.status=="success"?(i(),v(U,{key:1,style:{color:"var(--correct2-bg)","font-size":"1.75em"}},{default:u(()=>e[7]||(e[7]=[o("check")])),_:1,__:[7]})):(i(),v(U,{key:2,style:{color:"var(--incorrect-bg)","font-size":"1.75em"}},{default:u(()=>e[8]||(e[8]=[o("close")])),_:1,__:[8]}))],8,pe)],8,ue)])])):(i(),y("div",fe,e[10]||(e[10]=[a("h3",null,"No challenge selected to upload to, please try again.",-1)])))]),_:1},8,["opened","custom-on-close"])):J("",!0)}}),ge=E(he,[["__scopeId","data-v-5bef94ee"]]),Ce=I({__name:"PracticeView",setup(_){const t=P();return Q(()=>{document.body.classList.add("body"),G("/styles/practice.css"),W()}),X(()=>{D(),t.$reset(),document.body.classList.remove("body")}),(k,f)=>(i(),y(ee,null,[b(j,{"btn-index":1}),b(ge),f[0]||(f[0]=Z('<div class="c-home-outer"><div class="c-header"><h1>CHALLENGES</h1><div class="c-header-r"><div class="c-sort-div"><button class="c-sort-btn c-search"> Sort By <span class="material-symbols-outlined c-sort-toggle">arrow_drop_down</span></button></div><form class="c-search"><input type="text" id="search" name="q" placeholder="Search Challenges" class="c-search-inner c-search-bar"><input type="submit" value="Search" class="material-symbols-outlined c-search-inner c-bubble"></form></div></div><div class="c-home"><div class="challenge-left"><div class="c-filter-div"><h3 class="flx-sb gap-05"><div class="flx-sb c"> FILTERS </div><button class="clear-filters flx-c" style="text-transform:uppercase;"> Clear </button></h3><div class="filter-section"></div><div class="filter-section"><h4 class="f-title"> DIFFICULTY </h4><div class="f-options"><div class="f-option"><input type="checkbox" name="difficulty" id="easy" value="easy"><label for="easy">Easy</label></div><div class="f-option"><input type="checkbox" name="difficulty" id="medium" value="medium"><label for="medium">Medium</label></div><div class="f-option"><input type="checkbox" name="difficulty" id="hard" value="hard"><label for="hard">Hard</label></div><div class="f-option"><input type="checkbox" name="difficulty" id="code-wizard" value="code-wizard"><label for="code-wizard">Code Wizard</label></div></div></div><div class="filter-section"><h4 class="f-title"> TYPE </h4><div class="f-options"><div class="f-option"><input type="checkbox" name="ongoing" id="ongoing" value="ongoing"><label for="ongoing">Featured (Computing Club)</label></div></div><div class="f-options"><div class="f-option"><input type="checkbox" name="completed" id="completed" value="completed"><label for="completed">Completed</label></div></div></div></div></div><div class="challenge-right"><div class="c-outer-in-progress c-outer"><div class="c-ip-container-header"><h3 class="c-section"> IN PROGRESS </h3><h3 class="c-in-progress-counter"> (0) </h3></div><div class="c-in-progress-container c-container"></div></div><div class="c-outer-browse c-outer"><div class="c-browse-container-header"><h3 class="c-section"> BROWSE </h3><h3 class="c-browse-counter"> (0) </h3></div><div class="c-browse-container c-container"></div></div></div></div></div>',1))],64))}});export{Ce as default};
