import{j as Re,d as pt,b as ft,e as mt,a as vt,f as gt,g as yt,h as P,w as bt,v as wt,u as He,F as xt,o as $t}from"./index-CMF_CePX.js";import{p as Lt,u as Be,P as kt,s as Ct,a as Et,E as Pt,H as Mt}from"./Header-ZV7lvmHH.js";import{w as _t,c as Ue,o as Qe,d as We,e as Ve,f as D,g as X,m as ve,M as Je,L as Z,i as Ze,C as St,j as Xe,k as jt,l as $e,b as It,n as Tt}from"./util-BCUUeTU2.js";import{_ as Dt}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./xterm-CbIsyoms.js";let he,I,M,N;const Ft=Be();function Ge(i){if(Ce=i.clientX,Ee=i.clientY,te=Ce,se=Ee,z){if(ve.length||ge())return;ie=!0,lt()}}function Ke(i){ie&&(localStorage.getItem("cc-lastLID")&&localStorage.removeItem("cc-lastLID"),localStorage.setItem("cc-panX",($||0).toString()),localStorage.setItem("cc-panY",(L||0).toString()),localStorage.setItem("cc-zoom",(c||1).toString())),ie=!1}function et(i){if(!ve.length&&z&&i.touches.length==2){V=[...i.touches];let e=V[1].clientX-V[0].clientX,s=V[1].clientY-V[0].clientY;me=Math.sqrt(e**2+s**2)}}function tt(i){if(!ve.length&&(i.preventDefault(),!ge())){if(i.touches.length==1){let e=i.touches[0];le=e.clientX,ne=e.clientY}if(i.touches.length==2){let e=i.touches[1].clientX-i.touches[0].clientX,s=i.touches[1].clientY-i.touches[0].clientY;le=(i.touches[0].clientX+i.touches[1].clientX)/2,ne=(i.touches[0].clientY+i.touches[1].clientY)/2;let t=Math.sqrt(e**2+s**2),l=t-me;me=t,Math.abs(l)>0&&De(1+l/300)}else if(ie){let e=i.touches[0];i.preventDefault();let s=e.clientX-te,t=e.clientY-se;$+=s,L+=t,te=e.clientX,se=e.clientY,R()}}}function st(i){if(le=i.clientX,ne=i.clientY,ie){if(i.preventDefault(),ge())return;let e=i.clientX-te,s=i.clientY-se;$+=e,L+=s,te=i.clientX,se=i.clientY,R()}}function it(i){if(ve.length||ge())return;i.preventDefault();let e=Math.abs(i.deltaY)/500;i.deltaY!=Math.trunc(i.deltaY)&&(e*=8);let s=1.001+e;De(i.deltaY>0?1/s:s)}let G=-1;function ze(i){let e=i.target;if(!e){console.warn("no view options button to open");return}let s=["Reset Camera/View"];Qe(e,()=>s,t=>{t==0&&Zt(),We()})}function Nt(){I?.removeEventListener("pointerdown",Ge),window.removeEventListener("pointerup",Ke),window.removeEventListener("touchstart",et),window.removeEventListener("touchmove",tt),window.removeEventListener("mousemove",st),document.removeEventListener("wheel",it),G!=-1&&(clearInterval(G),G=-1),N&&(N.textContent=""),at()}function Ot(){I.addEventListener("pointerdown",Ge),window.addEventListener("pointerup",Ke),window.addEventListener("touchstart",et),window.addEventListener("touchmove",tt,{passive:!1}),window.addEventListener("mousemove",st),document.addEventListener("wheel",it,{passive:!1}),$=parseFloat(localStorage.getItem("cc-panX"))||0,L=parseFloat(localStorage.getItem("cc-panY"))||0,c=parseFloat(localStorage.getItem("cc-zoom"))||1,ot(c),localStorage.getItem("cc-lastLID"),R(),G!=-1&&clearInterval(G),G=setInterval(()=>{ye&&rt()},500)}let Le={lesson:{label:"Lesson",icon:"school",accent:"var(--learn-col)",useLabel:!1},project:{label:"Guided Project",icon:"deployed_code",accent:"var(--experiment-col)",useLabel:!0},rush:{label:"Rush Lesson",icon:"bolt",accent:"var(--practice-col)",useLabel:!0},review:{label:"Review",icon:"checkbook",accent:"var(--practice-col)",useLabel:!0}};class Yt{constructor(e,s=!1){this.id=e,this.bendOther=s}id;bendOther;pathCont}class qt{constructor(){}type;name;lid;x;y;next;prev;_x;_y;root;rootProg;desc=[];takeaways=[];preview=[];previewData;parent;sections;order;hide=!1;pub=!1;initialFiles;userFiles;getIcon(){return Le[Z[this.type??0]].icon}getAccent(){return Le[Z[this.type??0]].accent}getTypeData(){return Le[Z[this.type??0]]}loadFromData(e){let s=Object.keys(e);for(const t of s){let l=e[t];this[t]=l}this.next?this.next=this.next.filter(t=>t.id!=this.lid):this.next=[],this.prev||(this.prev=[])}async animateUnlocks(e,s){H.length!=0&&await H[H.length-1].prom;let t=ee.find(x=>x.lid==this.lid);if(!t||t.data.u||(console.log("moving to",t.l.name,t.l.pub),!t.l.pub))return;let l,a={prom:new Promise(x=>l=x),res:l};H.push(a),Wt(),await D(500);let n=-t.l._x*c+I.offsetWidth/2*c,d=-t.l._y*c+I.offsetHeight/2*c,o=$-n,r=L-d,h=Math.sqrt(o**2+r**2),b=h,u=1,m=c-u,w=Math.abs(m),k=w,y=5,T=.05;for(;h>y||w>T;){if(h>y){let x=Math.cos(h/b*Math.PI*2-Math.PI)*.3+1.1;$-=.06*o*x,L-=.06*r*x,R(),await D(15),n=-t.l._x*c+I.offsetWidth/2*c,d=-t.l._y*c+I.offsetHeight/2*c,o=$-n,r=L-d,h=Math.sqrt(o**2+r**2)}if(w>T){let x=Math.cos(w/k*Math.PI*2-Math.PI)*.3+1.1;m=(c-u)*x,w=Math.abs(m),le=t.l._x+$/c,ne=t.l._y+L/c,De(1-m*.06)}}if(R(),await D(250),rt(),t.data.u=!0,t.data.n=!0,t.update(),t.data.u&&t.l.pub){let x=Pe.filter(C=>C?.relObj==t);for(const C of x)C.showObj()}await D(250);let B=H.indexOf(a);B!=-1&&H.splice(B,1),a.res(),Vt()}}let H=[];function At(i){console.log(i);let e=[],s=[...i.lessons];i.lessons=[];let t=[];for(const l of s)l.hide?t.push(l.lid):i.lessons.push(l);e:for(const l of i.lessons){for(const n of l.links)if(t.includes(n.to)){t.push(l.lid);continue e}let a=new qt;a.loadFromData(l),a.prev=l.links?.map(n=>new Yt(n.to,n.flip))??[],a.type=l.ops.type??Z.lesson,i.isDev&&(a.pub=!0),e.push(a)}return{ar:e,meta:i.meta}}let ce=[];function lt(){if(ce.length){for(const i of ce)i.close();ce=[]}}class Ht{constructor(e,s,t){t==null&&(t={lid:e.lid,eventI:-1,taskI:-1,prog:0,mode:0,wu:"",s:!1,n:!1,u:!1,times:0,ws:"",hf:!1,wls:"",sceneI:0}),this.lid=e.lid,this.l=e,this.e=s,this.data=t}e;l;lid;data;b_start;d_actions;tmp;isHovering;prevPathCont;close(){this.b_start&&(this.b_start.classList.remove("open"),this.d_actions.classList.remove("open"),this.isHovering||(this.b_start.textContent=this.tmp,this.data.s&&(this.b_start.classList.remove("material-symbols-outlined"),this.b_start.classList.add("percent"))))}open(){this.b_start&&(lt(),ce.push(this),this.b_start.classList.add("open"),this.d_actions.classList.add("open"),this.b_start.classList.add("material-symbols-outlined"),this.b_start.classList.remove("percent"),this.b_start.textContent="more_horiz")}addFlag(e){let s=this.e.querySelector(".flags");if(!s)return;let t=["new","complete","inprogress"].indexOf(e),l=document.createElement("div");l.innerHTML=["NEW","<span class='material-symbols-outlined'>check</span>","IN PROGRESS"][t],l.className="item-flag flag-"+e,s.appendChild(l)}partNum=0;setPartNum(e){this.partNum=e,this.e.style.setProperty("--content-override",'"// Part '+this.partNum+'"')}update(){this.l.pub||(this.e.classList.contains("unfinished")||Ve(this.e,"This lesson is unfinished.",n=>{n.style.textAlign="center"}),this.e?.classList.add("unfinished"),this.data.u=!1);let e=this.e,s=this.data.u;if(s?(e.parentElement.classList.remove("locked"),e.classList.remove("locked")):(e.parentElement.classList.add("locked"),e.classList.add("locked")),e.parentElement.style.left=this.l._x+"px",e.parentElement.style.top=this.l._y+"px",s){let n=e.parentElement.querySelector(".item-cont-icon");n||(n=document.createElement("div"),n.className="item-cont-icon",e.parentElement.appendChild(n));let d=this.l.getTypeData();d.useLabel&&d.label&&(e.parentElement.style.setProperty("--content-override",'"// '+d.label+'"'),e.parentElement.classList.add("labeled")),d.accent&&e.parentElement.style.setProperty("--co",d.accent),e.parentElement.querySelector(".item-cont-icon").style.setProperty("--icon",`"${d.icon}"`);let o=d.label.toLowerCase().replaceAll(" ","-");if(e.parentElement.classList.add("type-"+o),e.parentElement.classList.add("type-"+o+"-parent"),this.l.type==Z.project){if(this.l.parent){let r=function(b){if(b&&b.parent){h++;for(const u of b.prev)r(ee.find(m=>m.lid==u.id)?.l)}},h=1;r(this.l),this.setPartNum(h)}}else if(this.l.type==Z.review){let r=document.createElement("div");r.className="vert-beam",e.parentElement.appendChild(r)}}this.prevPathCont&&(this.data.hf?(console.log("HAS FINISHED"),this.prevPathCont.classList.add("done")):this.prevPathCont.classList.remove("done")),s?e.innerHTML=`
            <div><span class="l-lesson-name">${Ze(this.l.name)}</span></div>
            <div class="btn-start ${this.data.s?"percent":"material-symbols-outlined"}">
                ${this.data.s?this.data.prog+"%":this.data.s?"more_horiz":"play_arrow"}
            </div>
            <div class="prog-circle">
                <canvas></canvas>
            </div>
            <!--${this.data.s?`
            <div class="prog-label">
                <span class="material-symbols-outlined" style="font-size:16px;margin-right:5px">check</span>
                <span>${this.data.prog}% Complete</span>
            </div>
            `:""}-->
            <div class="flags"></div>
            <div class="item-actions">
                ${this.data.prog!=100?`<div>
                    <div>play_arrow</div>
                    <div>Resume</div>
                </div>`:`
                <div>
                    <div>replay</div>
                    <div>Restart</div>
                </div>`}
                <div>
                    <div>delete</div>
                    <div>Clear</div>
                </div>
            </div>
        `:e.innerHTML=`
            <div class="lock-icon material-symbols-outlined">lock</div>
        `;let t=e.querySelector(".btn-start");this.b_start=t,this.d_actions=e.querySelector(".item-actions"),this.data.s&&this.data.prog!=100&&this.addFlag("inprogress"),this.data.hf?(this.addFlag("complete"),e.parentElement.classList.add("hf")):e.parentElement.classList.remove("hf"),this.data.prog==0&&!this.data.ws&&this.addFlag("new"),t&&(this.data.s?(this.tmp=t.textContent,t.onmouseenter=()=>{this.isHovering=!0,t.classList.add("material-symbols-outlined"),t.classList.remove("percent"),t.textContent=(this.data.prog==100,"more_horiz")},t.onmouseleave=()=>{this.isHovering=!1,!t.classList.contains("open")&&(t.classList.remove("material-symbols-outlined"),t.classList.add("percent"),t.textContent=this.tmp)}):(this.tmp=t.textContent,t.onmouseenter=()=>{this.isHovering=!0,this.data.s,t.classList.add("material-symbols-outlined"),t.textContent="play_arrow"},t.onmouseleave=()=>{this.isHovering=!1,!t.classList.contains("open")&&(this.data.s?t.classList.remove("material-symbols-outlined"):t.classList.add("material-symbols-outlined"),t.textContent=this.tmp)}));let l=e.querySelector("canvas");if(l){let n=function(){l.width=500,l.height=500;let h=l.getContext("2d"),b=40;h.lineWidth=b;let u=Math.PI/2,m=r/o,w=50*Math.cos((m-.44)*Math.PI*.9)*(o/d);r+=.004*w,u=r,(r>=o||r>=d)&&(u=o),h.strokeStyle="rgba(0,0,0,0.15)",h.beginPath(),h.arc(l.width/2,l.height/2,l.width/2-b,0,Math.PI*2),h.stroke(),h.strokeStyle="green",h.beginPath(),h.arc(l.width/2,l.height/2,l.width/2-b,0,u),h.stroke(),!(r>=o||r>=d)&&requestAnimationFrame(n)},d=Math.PI*2+.05,o=this.data.prog/100*d,r=0;n()}t&&t.addEventListener("click",n=>{if(n.stopImmediatePropagation(),n.stopPropagation(),!this.data.s){K(this.lid);return}t.classList.contains("open")?this.close():this.open()}),this.d_actions&&(this.d_actions.children[0].addEventListener("click",n=>{if(n.stopImmediatePropagation(),n.stopPropagation(),this.data.prog==100){ke(this);return}K(this.lid,0)}),this.d_actions.children[1].addEventListener("click",n=>{n.stopImmediatePropagation(),n.stopPropagation(),Me(this)})),e.querySelector(".l-lesson-name")?.addEventListener("click",n=>{new Xt(this).load()})}init(){let e=this.e;this.l.next.concat(this.l.prev),e.parentElement}deleteProgress(){this.data.eventI=-1,this.data.taskI=-1,this.data.prog=0,this.data.s=!1,this.data.sceneI=0,this.data.final_order=[],this.update()}resetProgress(){console.log(this),this.data.eventI=-1,this.data.taskI=-1,this.data.prog=0,this.data.s=!0,this.data.sceneI=0,this.data.final_order=[],this.update(),console.log(this)}}let ee=[],Pe=[];function K(i,e=0){X.emit("startLesson",i,e,s=>{if(s!=0){alert(`Error ${s} trying to start lesson`);return}localStorage.setItem("cc-lastLID",i),Re.push({path:`/learn/lesson/${i}`})})}async function ke(i){await Me(i,!0)&&K(i.lid)}function Me(i,e=!1){return new Promise(s=>{new St(`${e?"Restart Lesson":"Delete Progress"}`,`Are you sure you want<br> to ${e?"restart":"delete"} lesson progress for "${i.l.name}" ?`,()=>{X.emit("deleteLessonProgress",i.l.lid,l=>{l==0?(i.deleteProgress(),s(!0)):(alert("Err: while deleting lesson progress, error code: "+l),s(!1))})},()=>{}).load().body.querySelector(".b-confirm").classList.add("warn")})}class Xt extends Je{constructor(e){let s=e.l.getTypeData();super("// "+s.label.toUpperCase()+(e.partNum?` (Part ${e.partNum})`:""),s.icon),this.lesson=e,this.typeData=s}lesson;typeData;p;load(e,s){super.load(e,s),this.outerMenu.classList.add("menu-lesson"),this.typeData.accent&&(this.outerMenu.style.setProperty("--accent",this.typeData.accent),this.outerMenu.style.setProperty("--cta-btn-col",this.typeData.accent)),this.body.innerHTML=`
            <div class="menu-block-cont" style="gap:30px;margin:10px;height:100%">
                <div class="menu-block details-block">
                    <div class="labeled-label">
                        <div>Lesson Name</div>
                        <div class="l-name">${Ze(this.lesson.l.name)}</div>
                    </div>
                    <br><br>
                    <div class="start-cont">
                        <div class="l-prog">
                            ${this.lesson.data.prog}% Complete
                        </div>
                        <button class="b-more-options hide">
                            <div class="material-symbols-outlined">more_vert</div>
                        </button>
                        <button class="b-continue hide">Continue</button>
                        <button class="b-start hide">Start</button>
                    </div>
                    <br><br>
                    <div class="labeled-label">
                        <div>Description</div>
                        <div class="l-desc d-bubble">
                            ${this.lesson.l.desc.map(d=>`<div>${Xe(d)}</div>`).join("<br>")}
                            <!--<div>This is an example descripion for a lesson.<br><br>Probably a lot of useful information would go in here like what you will learn specifically in a list such as:</div>
                            <ul>
                                <li>Thing to learn 1</li>
                                <li>Another thing</li>
                                <li>You can code now</li>
                            </ul>
                            <div>And that's about it.</div>-->
                        </div>
                    </div>
                    <br><br>
                    <div class="labeled-label">
                        <div>Key Takeaways</div>
                        <div class="d-bubble">
                            <ul>
                                ${this.lesson.l.takeaways.map(d=>`<li>${Xe(d)}</li>`).join("")}
                                <!--<li>Thing to learn 1</li>
                                <li>Another thing</li>
                                <li>You can code now</li>-->
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="menu-block preview-block">
                    <div class="labeled-label" style="height:100%;display:flex;flex-direction:column">
                        <div>Sample</div>
                        <div class="sample-editor" style="height:calc(100% - 75px)">
                            
                        </div>
                    </div>
                </div>
            </div>
        `,this.loadEditor();let t=this.body.querySelector(".b-start"),l=this.body.querySelector(".b-continue"),a=this.body.querySelector(".b-more-options"),n=()=>{this.lesson.data.prog==100?l.textContent="Restart":l.textContent="Continue",this.lesson.data.s?(t.classList.add("hide"),l.classList.remove("hide"),a.classList.remove("hide")):(t.classList.remove("hide"),l.classList.add("hide"),a.classList.add("hide"))};return n(),t.addEventListener("click",d=>{K(this.lesson.lid)}),l.addEventListener("click",async d=>{this.lesson.data.prog==100?ke(this.lesson):K(this.lesson.lid)}),a.addEventListener("mousedown",d=>{Qe(a,()=>["Delete Progress","Restart","[Debug] Continue","[Debug] ERASE META"],async o=>{o==0?await Me(this.lesson)&&(this.lesson.data.s=!1,n()):o==1?await ke(this.lesson):o==2?K(this.lesson.lid):o==3&&X.emit("debug_eraseLessonMeta",this.lesson.lid,r=>{jt(r)||this.close()})},{getIcons:()=>["delete","replay"]})}),this}async loadPreview(){Lt(Ft.project)}async loadEditor(){await Ue();let e=new kt("Sample Project",this.body.querySelector(".sample-editor"),{readonly:!1});e.builtInFileList=!0,this.p=e,Ct(e.parent,Pt.none),Et(e,!0),e.parent.querySelector(".b-add-file").remove();let s=this.lesson.l.previewData;async function t(l,a){if(l)for(const n of l.items)if("buf"in n)await e.createFile(n.name,n.buf,null,a,!1);else{let d=e.createFolder(n.name,a,!1);await t(n,d)}}await t(s);for(const l of e.files)l.open(!1);e.curFile?.editor?.layout(),await this.loadPreview()}onClose(){if(this.p)for(const e of this.p.files)e.editor&&e.editor.dispose()}}let J=10;async function zt(i){let e=I.offsetWidth/2,s=I.offsetHeight/2;console.log("----- CXCY",e,s);let{ar:t,meta:l}=await new Promise(o=>{X.emit("getProgressTree",i,r=>{if(typeof r=="number"||r==null){alert(`Error ${r} while trying to get progress tree: ${i}`);return}o(At(r))})}),a=await new Promise(o=>{X.emit("getLearnData",t.map(r=>r.lid),r=>{if(typeof r=="number"){alert(`Error ${r}: failed to retrieve learn progress`);return}let h=[],b=Object.keys(r);for(const u of b){let m=r[u];m&&(m.lid=u,h.push(m))}o(h)})});for(const o of t)o.root=t,o.rootProg=a;function n(o,r){if(r.includes(o.lid))return[0,0];r.push(o.lid);let h=o.prev[0];if(h){let b=o,u=t.find(k=>k.lid==h.id);if(!b)return console.warn("$ couldn't find item: ",o.lid,h.id),[0,0];if(!u)return console.warn("$ couldn't find prevItem: ",o.lid,h.id),[0,0];let[m,w]=n(u,r);return o._x=e+(o.x+m)*J,o._y=s+(o.y+w)*J,[o.x+m,o.y+w]}return[o.x,o.y]}for(const o of t)n(o,[]);for(const o of t)if(o._x==null){let r=e+o.x*J,h=s+o.y*J;o._x=r,o._y=h}t.sort((o,r)=>(o._x|r._y)-o._x*r._y);let d=document.createElement("div");N.appendChild(d);for(const o of t){await D(10);let r=a.find(y=>y.lid==o.lid),h=o._x,b=o._y,u=document.createElement("div");u.classList.add("item-cont");let m=document.createElement("div");m.classList.add("circle"),u.style.left=h+"px",u.style.top=b+"px",u.addEventListener("mouseenter",y=>{z=!1}),u.addEventListener("mouseleave",y=>{z=!0}),u.appendChild(m),d.appendChild(u);let w=new Ht(o,m,r);ee.push(w),w.update(),setTimeout(()=>{o.prev.every(y=>ee.find(T=>T.lid==y.id)?.data.hf)&&X.emit("postFinishLesson",w.lid,y=>{y!=0&&typeof y!="number"&&o.animateUnlocks(t,y)})},1e3);let k=50;if(o.prev)for(const y of o.prev){let T=t.find(B=>B.lid==y.id);if(T){let B=function(){return Y+=E,q+=E,oe-=E,ae-=E,p>f?p-=E:p+=E,v>g?v-=E:v+=E,f>p?f-=E:f+=E,g>v?g-=E:g+=E,!0},x=function(){let fe=C.querySelector("path"),de=fe.getTotalLength()/2;de=Math.floor(de/60)*60+45;let Ye=fe.getPointAtLength(de-1),qe=fe.getPointAtLength(de+1),Ae=fe.getPointAtLength(de),ct=qe.x-Ye.x,ht=qe.y-Ye.y,ut=Math.atan2(ht,ct);Q.style.left=Ae.x+"px",Q.style.top=Ae.y+"px",Q.style.transform=`translate(-50%,-50%) rotate(${ut}rad)`},C=document.createElement("div");C.classList.add("test");let Y=0,q=0,oe=0,ae=0,Fe=[o._x,T._x],Ne=[o._y,T._y];Y=Math.min(...Fe),q=Math.min(...Ne),oe=Math.max(...Fe),ae=Math.max(...Ne);let be=(oe+Y)/2,A=(ae+q)/2,p=T._x,v=T._y,f=o._x,g=o._y,we=f-p,xe=g-v,Oe=Math.sqrt(we**2+xe**2),_=we,F=xe,pe=y.bendOther;we/=Oe,xe/=Oe;let S="40,20";C.style.width=Math.abs(_)+"px",C.style.height=Math.abs(F)+"px",C.style.left=Y+"px",C.style.top=q+"px";let j="8",re=0,E=5,dt=(Math.abs(_)+re*2)/Math.abs(_);C.innerHTML=`
                    <!--<svg viewBox="0 0 ${I.offsetWidth} ${I.offsetHeight}" xmlns="http://www.w3.org/2000/svg">-->
                    <svg style="transform:scale(${dt});margin-left:0px;margin-top:0px" viewBox="${Y-re} ${q-re} ${Math.abs(_)+re*2} ${Math.abs(F)+re*2}" xmlns="http://www.w3.org/2000/svg">
        <!-- <path d="M ${Y-k},${q-k} L ${oe+k},${q-k} L ${oe+k},${ae+k} L ${Y-k},${ae+k} z" stroke="red" fill="none"/> -->

        
        <!--<path d="M ${p},${v} Q ${p},${A} ${be},${A}" stroke="var(--col)" fill="none" stroke-dasharray="${S}" stroke-linecap="round" stroke-width="${j}"/>-->
        <!--<path d="M ${be},${A} Q ${f},${A} ${f},${g}" stroke="var(--col)" fill="none" stroke-dasharray="${S}" stroke-linecap="round" stroke-width="${j}"/>-->

        <!--<path d="M ${p},${v} Q ${p},${A} ${be},${A} Q ${f},${A} ${f},${g}" stroke="var(--col)" fill="none" stroke-dasharray="${S}" stroke-linecap="round" stroke-width="${j}"/>-->

        ${B(),""}
        ${_>0&&F>0&&pe?`<path d="M ${p},${v} Q ${f},${v} ${f},${g}" stroke="var(--col)" fill="none" stroke-dasharray="${S}" stroke-linecap="round" stroke-width="${j}"/>`:_>0&&F>0?`<path d="M ${p},${v} Q ${p},${g} ${f},${g}" stroke="var(--col)" fill="none" stroke-dasharray="${S}" stroke-linecap="round" stroke-width="${j}"/>`:_>0&&F<0&&pe?`<path d="M ${p},${v} Q ${p},${g} ${f},${g}" stroke="var(--col)" fill="none" stroke-dasharray="${S}" stroke-linecap="round" stroke-width="${j}"/>`:_>0&&F<0?`<path d="M ${p},${v} Q ${f},${v} ${f},${g}" stroke="var(--col)" fill="none" stroke-dasharray="${S}" stroke-linecap="round" stroke-width="${j}"/>`:_<0&&F>0&&pe?`<path d="M ${p},${v} Q ${f},${v} ${f},${g}" stroke="var(--col)" fill="none" stroke-dasharray="${S}" stroke-linecap="round" stroke-width="${j}"/>`:_<0&&F>0?`<path d="M ${p},${v} Q ${p},${g} ${f},${g}" stroke="var(--col)" fill="none" stroke-dasharray="${S}" stroke-linecap="round" stroke-width="${j}"/>`:_<0&&F<0&&pe?`<path d="M ${p},${v} Q ${p},${g} ${f},${g}" stroke="var(--col)" fill="none" stroke-dasharray="${S}" stroke-linecap="round" stroke-width="${j}"/>`:`<path d="M ${p},${v} Q ${f},${v} ${f},${g}" stroke="var(--col)" fill="none" stroke-dasharray="${S}" stroke-linecap="round" stroke-width="${j}"/>`}
    </svg>
                    `;let U=document.createElement("div");U.className="path-cont",setTimeout(()=>{N.appendChild(U)},50),y.pathCont=U,w.prevPathCont=U,U.appendChild(C);let Q=document.createElement("div");Q.className="arrow",x(),Q.innerHTML=`
                        <svg viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
                            <path d="M 5,5 L 25,25 L 5,45" stroke-width="8" fill="none" stroke="var(--col)" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    `,U.appendChild(Q)}}}l&&setTimeout(()=>{if(l.objs)for(const o of l.objs){let r=W.add(o);Pe.push(r)}},0)}function Rt(){let i=document.createElement("div");return i.classList.add("item-cont","type-warp-zone"),N.children[0].appendChild(i),i.style.left="1100px",i.style.top="1300px",i.innerHTML=`
        <div class="gfx-cont">
            <!--<div class="grad-cont">
                <div></div>
                <div></div>
                <div></div>
            </div>-->
            <svg width="400" height="400" class="blend-group-0">
                <rect class="blend-item" x="150" y="150" width="100" height="100" fill="rgb(255,0,0)" rx="20" ry="20"></rect>
                <rect class="blend-item" x="150" y="150" width="100" height="100" fill="rgb(0,255,0)" rx="20" ry="20"></rect>
                <rect class="blend-item" x="150" y="150" width="100" height="100" fill="rgb(0,0,255)" rx="20" ry="20"></rect>
            </svg>
            <!--<svg width="400" height="400" class="blend-group-1">
                <rect class="blend-item" x="150" y="150" width="100" height="100" fill="rgb(255,0,0)" rx="20" ry="20"></rect>
                <rect class="blend-item" x="150" y="150" width="100" height="100" fill="rgb(0,255,0)" rx="20" ry="20"></rect>
                <rect class="blend-item" x="150" y="150" width="100" height="100" fill="rgb(0,0,255)" rx="20" ry="20"></rect>
            </svg>-->
        </div>
    `,i}function Bt(i,e){let s=document.createElement("div");return s.classList.add("item-cont","type-sign"),s.style.left=i+"px",s.style.top=e+"px",s.innerHTML=`
        <div class="sign-cont">
            <div class="sign-stem"></div>
            <div class="sign-back"></div>
            <div class="sign-face">
                <div>[...]</div>
            </div>
        </div>
    `,s}var nt=(i=>(i[i.sign=0]="sign",i[i.warp=1]="warp",i[i.banner=2]="banner",i[i.element=3]="element",i))(nt||{});class Ut{constructor(){this.reg=new Map,this.objCont=document.createElement("div"),N.appendChild(this.objCont)}reg;objCont;register(e){let s=e.getType();if(this.reg.has(s)){console.warn("$ learn object registry already has an entry with the type: ",nt[s]);return}this.reg.set(s,e)}add(e){let s=this.reg.get(e.type);if(!s){console.warn("Failed to find ref: ",e);return}let t=s.parse(e);if(!s){console.warn("Failed to find LearnObj type in registry: ",e);return}let l=t.load();if(t.hasManualPostLoad()||t.postLoad(),!s){console.warn("Failed to load elm from LearnObj load: ",e);return}return this.objCont.appendChild(l),t.relObj&&!t.relObj.data.u&&t.hideObj(),e.hide&&l.classList.add("hide"),t}}let W;class O{constructor(){}x;y;id;data;rel;relObj;elm;hide;wasJustUnlocked=!1;postLoad(){this.elm.style.left=this.x+"px",this.elm.style.top=this.y+"px",this.elm.classList.add("lo-any"),this.wasJustUnlocked=!1}hasManualPostLoad(){return!1}static parseSuper(e,s){if(e.id=s.id,e.data=s.data,e.rel=s.rel,s.rel){let[t,l]=s.rel.split("@");if(t!="o"){if(t=="l"){let a=ee.find(n=>n.lid==l);if(!a){console.warn(`$ err: not good! couldn't find relation object for learn obj:

`,t,l,s.type,s.id);return}e.x=a.l._x+s.x*J,e.y=a.l._y+s.y*J,e.relObj=a}}}else e.x=s.x,e.y=s.y}showObj(){this.hide||this.elm&&(this.elm.classList.remove("force-hide"),this.wasJustUnlocked=!0)}hideObj(){this.elm&&this.elm.classList.add("force-hide")}}class _e extends O{constructor(){super()}getType(){return 0}parse(e){let s=new _e;return O.parseSuper(s,e),s}load(){let e=Bt(this.x,this.y);return e.querySelector(".sign-face").addEventListener("click",t=>{this.open()}),this.elm=e,e}open(){new Qt(this).load()}}class Qt extends Je{constructor(e){super("A Sign","lightbulb"),this.obj=e}obj;load(e,s){super.load(e,s),this.menu.classList.add("menu-sign"),this.menu.style.setProperty("--accent","rgb(91, 49, 18)");let t=document.createElement("div");t.className="sign-menu-list menu-block";let l;const a=()=>{l=document.createElement("p"),l.classList.add("d-bubble"),t.appendChild(l)};if(a(),this.obj.data){if(this.obj.data.title){let n=document.createElement("h3");n.textContent=this.obj.data.title,n.classList.add("sign-title"),t.insertBefore(n,t.children[0])}for(const n of this.obj.data.desc){if(n.startsWith("$")){n.substring(1)=="br"&&a();continue}let d=document.createElement("p");d.textContent=n,l.appendChild(d)}}else{let n=document.createElement("p");n.textContent="[ There doesn't seem to be any text on the sign. ]",n.style.textAlign="center",l.appendChild(n)}return this.body.appendChild(t),this}}class Se extends O{constructor(){super()}getType(){return 2}parse(e){let s=new Se;return O.parseSuper(s,e),s}load(){let e=document.createElement("div");e.className="lo-banner";let s=document.createElement("div");return s.textContent=this.data.title,e.appendChild(s),this.elm=e,e}}class je extends O{constructor(){super()}hasCreatedParts=!1;getType(){return 3}parse(e){let s=new je;return O.parseSuper(s,e),s}cont;load(){let e=document.createElement("div");e.className="lo-element",this.elm=e;let s=document.createElement("div");if(s.className="lo-element-ops",e.appendChild(s),this.relObj){let l=document.createElement("div");l.className="icon-btn normal",l.innerHTML="<div>info</div>",l.onclick=()=>{alert(`These little snippets are examples of something you could create using the information learned in this lesson.

This one is based off the lesson: "`+this.relObj.l.name.toUpperCase()+'"')},s.appendChild(l),Ve(l,"Info")}let t=document.createElement("div");return this.cont=t,t.className="lo-element-cont",e.appendChild(t),setTimeout(()=>{!this.hasCreatedParts&&this.relObj.data.u&&this.createPart(this.data,t,!1)},50),t.addEventListener("mouseenter",l=>{z=!1}),t.addEventListener("mouseleave",l=>{z=!0}),this.elm}async createPart(e,s,t){if(this.hasCreatedParts=!0,e.tag=="script"){console.warn("Sorry! scripts aren't allowed to be loaded dynamically yet using learnObj elements!");return}let l=document.createElement(e.tag);s.appendChild(l);let a=!this.relObj?.data.u;if(t!=null&&(a=t),a&&await D(200),e.className&&(l.className=e.className),e.attr){let n=Object.keys(e.attr);for(const d of n)l.setAttribute(d,e.attr[d]),a&&await D(200)}if(e.style){let n=Object.keys(e.style);for(const d of n)l.style[d]=e.style[d],a&&await D(200)}if(e.children)for(const n of e.children)await this.createPart(n,l),a&&await D(200);return e.text&&(a&&await D(200),l.textContent=e.text),l}showObj(){this.hasCreatedParts?console.log("ERR: parts were already created!"):this.createPart(this.data,this.cont,!0),super.showObj()}}class Ie extends O{getType(){return 1}parse(e){let s=new Ie;return O.parseSuper(s,e),s}load(){return this.elm=Rt(),this.elm}constructor(){super()}}let z=!0,Ce=0,Ee=0,te=0,se=0,ie=!1,$=0,L=0,c=1,Te=5,le=0,ne=0,ue=0;function Wt(){ue++,M.classList.add("animate")}function Vt(){ue--,ue<=0&&M.classList.remove("animate")}function ge(){return ue>0}let V,me=1;function R(){if(!M)return;M.style.marginLeft=$+"px",M.style.marginTop=L+"px";let i=M.getBoundingClientRect(),e=i.x+i.width/2,s=i.y+i.height/2;he.style.backgroundPositionX=e+"px",he.style.backgroundPositionY=s+"px"}function De(i){c*=i,c<.1&&(c=.1),c>5&&(c=5);let e=M.getBoundingClientRect();M.style.scale=c.toString(),he.style.backgroundSize=c*Te+"vw";let s=M.getBoundingClientRect(),t=s.width-e.width,l=s.height-e.height,a=le-(e.x+e.width/2),n=ne-(e.y+e.height/2),d=a/e.width,o=n/e.height;$-=t*d,L-=l*o,R(),ye=!0}let ye=!1;function ot(i){M&&(c=i,c<.1&&(c=.1),c>5&&(c=5),M.style.scale=c.toString(),he.style.backgroundSize=c*Te+"vw")}function at(){ce=[],ee=[],Pe=[],z=!0,Ce=0,Ee=0,te=0,se=0,ie=!1,$=0,L=0,c=1,Te=5,le=0,ne=0,ue=0,V=[],me=1,ye=!1,H=[]}async function Jt(){if(!await _t())return;await Ue(),at(),he=document.querySelector(".main"),I=document.querySelector(".p-tree"),M=document.querySelector(".pan-cont"),N=document.querySelector(".cont"),N.textContent="",Ot(),W=new Ut,W.register(new _e),W.register(new Se),W.register(new je),W.register(new Ie);let e=new URL(location.href).searchParams.get("f")??"theBeginnings";zt(e)}function rt(){localStorage.setItem("cc-panX",($||0).toString()),localStorage.setItem("cc-panY",(L||0).toString()),localStorage.setItem("cc-zoom",(c||1).toString())}function Zt(){$=0,L=0,R(),ot(1),ye=!0}const Gt={class:"extra-overlay"},Kt={class:"live-lessons"},es={class:"main"},ts=pt({__name:"LearnView",setup(i){const e=Be();ft(async()=>{$e("/styles/learn.css"),$e("/styles/editor.css"),$e("/styles/flashcards.css"),await Jt()}),mt(()=>{It(),Nt(),Tt(),We(!0),e.$reset()});const s=vt("");function t(){let l=s.value;l&&l.length==4&&(console.log("attempting to join live lesson with code:",l),X.emit("join-live-lesson",l,a=>{if(!a){let n="Failed to join live lesson";console.warn(n),alert(n);return}if(typeof a=="number"){let n=`Failed to join live lesson with code: ${a}`;console.warn(n),alert(n);return}else if("err"in a){let n=`Failed to join live lesson with code: ${a.err}`;console.warn(n),alert(n);return}alert("Joined live lesson at code: "+l),console.log(":: joined lesson with code",l,a),Re.push({path:`/learn/lesson/live-${l}`})}))}return(l,a)=>($t(),gt(xt,null,[yt(Mt,{"btn-index":0,"page-id":"learn"}),a[4]||(a[4]=P("div",{class:"learn-page"},null,-1)),P("div",Gt,[P("div",Kt,[a[2]||(a[2]=P("div",{style:{"margin-inline":"8px"}},"Join Live Lesson",-1)),bt(P("input",{"onUpdate:modelValue":a[0]||(a[0]=n=>s.value=n),type:"text",name:"live-lesson-code",id:"live-lesson-code",placeholder:"Join code"},null,512),[[wt,s.value]]),P("button",{class:"accent button-thin",onClick:t},"Join")])]),a[5]||(a[5]=P("div",{class:"center-mark"},null,-1)),P("div",es,[P("div",{onClick:a[1]||(a[1]=(...n)=>He(ze)&&He(ze)(...n)),class:"view-options material-symbols-outlined"},"menu"),a[3]||(a[3]=P("div",{class:"p-tree"},[P("div",{class:"pan-cont"},[P("div",{class:"cont"})])],-1))])],64))}}),as=Dt(ts,[["__scopeId","data-v-714f8cd6"]]);export{as as default};
