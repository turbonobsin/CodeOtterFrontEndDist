import{j as Se,d as gt,b as yt,e as bt,a as wt,f as xt,g as $t,h as M,w as Lt,v as kt,u as Be,F as Ct,o as Et}from"./index-BA_zY1xG.js";import{p as Pt,u as We,P as Mt,s as St,a as _t,E as jt,H as It}from"./Header-qTmbpJZ4.js";import{w as Dt,c as Ve,o as Je,d as Ze,e as Ge,f as L,u as Tt,g as z,m as ye,M as Ke,L as ee,i as et,C as Ft,j as Ue,k as Nt,l as ke,b as qt,n as Yt}from"./util-BTTZT_bN.js";import{_ as Ot}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./xterm-CbIsyoms.js";let pe,D,S,Y;const At=We(),G=Tt();function tt(i){if(Pe=i.clientX,Me=i.clientY,ie=Pe,le=Me,U){if(ye.length||be())return;ne=!0,at()}}function st(i){ne&&(localStorage.getItem("cc-lastLID")&&localStorage.removeItem("cc-lastLID"),localStorage.setItem("cc-panX",(k||0).toString()),localStorage.setItem("cc-panY",(C||0).toString()),localStorage.setItem("cc-zoom",(c||1).toString())),ne=!1}function it(i){if(!ye.length&&U&&i.touches.length==2){Z=[...i.touches];let e=Z[1].clientX-Z[0].clientX,s=Z[1].clientY-Z[0].clientY;ge=Math.sqrt(e**2+s**2)}}function lt(i){if(!ye.length&&(i.preventDefault(),!be())){if(i.touches.length==1){let e=i.touches[0];oe=e.clientX,ae=e.clientY}if(i.touches.length==2){let e=i.touches[1].clientX-i.touches[0].clientX,s=i.touches[1].clientY-i.touches[0].clientY;oe=(i.touches[0].clientX+i.touches[1].clientX)/2,ae=(i.touches[0].clientY+i.touches[1].clientY)/2;let t=Math.sqrt(e**2+s**2),l=t-ge;ge=t,Math.abs(l)>0&&Ye(1+l/300)}else if(ne){let e=i.touches[0];i.preventDefault();let s=e.clientX-ie,t=e.clientY-le;k+=s,C+=t,ie=e.clientX,le=e.clientY,Q()}}}function nt(i){if(!G.warping&&(oe=i.clientX,ae=i.clientY,ne)){if(i.preventDefault(),be())return;let e=i.clientX-ie,s=i.clientY-le;k+=e,C+=s,ie=i.clientX,le=i.clientY,Q()}}function ot(i){if(G.warping||ye.length||be())return;i.preventDefault();let e=Math.abs(i.deltaY)/500;i.deltaY!=Math.trunc(i.deltaY)&&(e*=8);let s=1.001+e;Ye(i.deltaY>0?1/s:s)}let te=null;function Qe(i){let e=i.target;if(!e){console.warn("no view options button to open");return}let s=["Reset Camera/View"];Je(e,()=>s,t=>{t==0&&ts(),Ze()})}function Ht(){D?.removeEventListener("pointerdown",tt),window.removeEventListener("pointerup",st),window.removeEventListener("touchstart",it),window.removeEventListener("touchmove",lt),window.removeEventListener("mousemove",nt),document.removeEventListener("wheel",ot),te!=null&&(clearInterval(te),te=null),Y&&(Y.textContent=""),ct()}function Xt(){D.addEventListener("pointerdown",tt),window.addEventListener("pointerup",st),window.addEventListener("touchstart",it),window.addEventListener("touchmove",lt,{passive:!1}),window.addEventListener("mousemove",nt),document.addEventListener("wheel",ot,{passive:!1}),k=parseFloat(localStorage.getItem("cc-panX"))||0,C=parseFloat(localStorage.getItem("cc-panY"))||0,c=parseFloat(localStorage.getItem("cc-zoom"))||1,dt(c),localStorage.getItem("cc-lastLID"),Q(),te!=null&&clearInterval(te),te=setInterval(()=>{we&&ut()},500)}let Ce={lesson:{label:"Lesson",icon:"school",accent:"var(--learn-col)",useLabel:!1},project:{label:"Guided Project",icon:"deployed_code",accent:"var(--experiment-col)",useLabel:!0},rush:{label:"Rush Lesson",icon:"bolt",accent:"var(--practice-col)",useLabel:!0},review:{label:"Review",icon:"checkbook",accent:"var(--practice-col)",useLabel:!0}};class Rt{constructor(e,s=!1){this.id=e,this.bendOther=s}id;bendOther;pathCont}class zt{constructor(){}type;name;lid;x;y;next;prev;_x;_y;root;rootProg;desc=[];takeaways=[];preview=[];previewData;parent;sections;order;hide=!1;pub=!1;initialFiles;userFiles;getIcon(){return Ce[ee[this.type??0]].icon}getAccent(){return Ce[ee[this.type??0]].accent}getTypeData(){return Ce[ee[this.type??0]]}loadFromData(e){let s=Object.keys(e);for(const t of s){let l=e[t];this[t]=l}this.next?this.next=this.next.filter(t=>t.id!=this.lid):this.next=[],this.prev||(this.prev=[])}async animateUnlocks(e,s){X.length!=0&&await X[X.length-1].prom;let t=B.find($=>$.lid==this.lid);if(!t||t.data.u||(console.log("moving to",t.l.name,t.l.pub),!t.l.pub))return;let l,a={prom:new Promise($=>l=$),res:l};X.push(a),Kt(),await L(500);let n=-t.l._x*c+D.offsetWidth/2*c,d=-t.l._y*c+D.offsetHeight/2*c,o=k-n,r=C-d,h=Math.sqrt(o**2+r**2),p=h,u=1,f=c-u,w=Math.abs(f),x=w,g=5,T=.05;for(;h>g||w>T;){if(h>g){let $=Math.cos(h/p*Math.PI*2-Math.PI)*.3+1.1;k-=.06*o*$,C-=.06*r*$,Q(),await L(15),n=-t.l._x*c+D.offsetWidth/2*c,d=-t.l._y*c+D.offsetHeight/2*c,o=k-n,r=C-d,h=Math.sqrt(o**2+r**2)}if(w>T){let $=Math.cos(w/x*Math.PI*2-Math.PI)*.3+1.1;f=(c-u)*$,w=Math.abs(f),oe=t.l._x+k/c,ae=t.l._y+C/c,Ye(1-f*.06)}}if(Q(),await L(250),ut(),t.data.u=!0,t.data.n=!0,t.update(),t.data.u&&t.l.pub){let $=_e.filter(E=>E?.relObj==t);for(const E of $)E.showObj()}await L(250);let W=X.indexOf(a);W!=-1&&X.splice(W,1),a.res(),es()}boardExtraData}let X=[];function Bt(i){console.log(i);let e=[],s=[...i.lessons];i.lessons=[];let t=[];for(const l of s)l.hide?t.push(l.lid):i.lessons.push(l);e:for(const l of i.lessons){for(const n of l.links)if(t.includes(n.to)){t.push(l.lid);continue e}let a=new zt;a.loadFromData(l),a.prev=l.links?.map(n=>new Rt(n.to,n.flip))??[],a.type=l.ops.type??ee.lesson,i.isDev&&(a.pub=!0),e.push(a)}return{ar:e,meta:i.meta}}let ue=[];function at(){if(ue.length){for(const i of ue)i.close();ue=[]}}class Ut{constructor(e,s,t){t==null&&(t={lid:e.lid,eventI:-1,taskI:-1,prog:0,mode:0,wu:"",s:!1,n:!1,u:!1,times:0,ws:"",hf:!1,wls:"",sceneI:0}),this.lid=e.lid,this.l=e,this.e=s,this.data=t}e;l;lid;data;b_start;d_actions;tmp;isHovering;prevPathCont;close(){this.b_start&&(this.b_start.classList.remove("open"),this.d_actions.classList.remove("open"),this.isHovering||(this.b_start.textContent=this.tmp,this.data.s&&(this.b_start.classList.remove("material-symbols-outlined"),this.b_start.classList.add("percent"))))}open(){this.b_start&&(at(),ue.push(this),this.b_start.classList.add("open"),this.d_actions.classList.add("open"),this.b_start.classList.add("material-symbols-outlined"),this.b_start.classList.remove("percent"),this.b_start.textContent="more_horiz")}addFlag(e){let s=this.e.querySelector(".flags");if(!s)return;let t=["new","complete","inprogress"].indexOf(e),l=document.createElement("div");l.innerHTML=["NEW","<span class='material-symbols-outlined'>check</span>","IN PROGRESS"][t],l.className="item-flag flag-"+e,s.appendChild(l)}partNum=0;setPartNum(e){this.partNum=e,this.e.style.setProperty("--content-override",'"// Part '+this.partNum+'"')}updateProgRef=void 0;update(){this.l.pub||(this.e.classList.contains("unfinished")||Ge(this.e,"This lesson is unfinished.",n=>{n.style.textAlign="center"}),this.e?.classList.add("unfinished"),this.data.u=!1);let e=this.e,s=this.data.u;if(s?(e.parentElement.classList.remove("locked"),e.classList.remove("locked")):(e.parentElement.classList.add("locked"),e.classList.add("locked")),e.parentElement.style.left=this.l._x+"px",e.parentElement.style.top=this.l._y+"px",s){let n=e.parentElement.querySelector(".item-cont-icon");n||(n=document.createElement("div"),n.className="item-cont-icon",e.parentElement.appendChild(n));let d=this.l.getTypeData();d.useLabel&&d.label&&(e.parentElement.style.setProperty("--content-override",'"// '+d.label+'"'),e.parentElement.classList.add("labeled")),d.accent&&e.parentElement.style.setProperty("--co",d.accent),e.parentElement.querySelector(".item-cont-icon").style.setProperty("--icon",`"${d.icon}"`);let o=d.label.toLowerCase().replaceAll(" ","-");if(e.parentElement.classList.add("type-"+o),e.parentElement.classList.add("type-"+o+"-parent"),this.l.type==ee.project){if(this.l.parent){let r=function(p){if(p&&p.parent){h++;for(const u of p.prev)r(B.find(f=>f.lid==u.id)?.l)}},h=1;r(this.l),this.setPartNum(h)}}else if(this.l.type==ee.review){let r=document.createElement("div");r.className="vert-beam",e.parentElement.appendChild(r)}}this.prevPathCont&&(this.data.hf?(console.log("HAS FINISHED"),this.prevPathCont.classList.add("done")):this.prevPathCont.classList.remove("done")),s?e.innerHTML=`
            <div><span class="l-lesson-name">${et(this.l.name)}</span></div>
            <div class="btn-start ${this.data.s?"percent":"material-symbols-outlined"}">
                ${this.data.s?this.data.prog+"%":this.data.s?"more_horiz":"play_arrow"}
            </div>
            <div class="prog-circle">
                <canvas></canvas>
            </div>
            <!--${this.data.s?`
            <div class="prog-label">
                <span class="material-symbols-outlined" style="font-size:16px;margin-right:5px">check</span>
                <span>${this.data.prog}% Complete</span>
            </div>
            `:""}-->
            <div class="flags"></div>
            <div class="item-actions">
                ${this.data.prog!=100?`<div>
                    <div>play_arrow</div>
                    <div>Resume</div>
                </div>`:`
                <div>
                    <div>replay</div>
                    <div>Restart</div>
                </div>`}
                <div>
                    <div>delete</div>
                    <div>Clear</div>
                </div>
            </div>
        `:e.innerHTML=`
            <div class="lock-icon material-symbols-outlined">lock</div>
        `;let t=e.querySelector(".btn-start");this.b_start=t,this.d_actions=e.querySelector(".item-actions"),this.data.s&&this.data.prog!=100&&this.addFlag("inprogress"),this.data.hf?(this.addFlag("complete"),e.parentElement.classList.add("hf")):e.parentElement.classList.remove("hf"),this.data.prog==0&&!this.data.ws&&this.addFlag("new"),t&&(this.data.s?(this.tmp=t.textContent,t.onmouseenter=()=>{this.isHovering=!0,t.classList.add("material-symbols-outlined"),t.classList.remove("percent"),t.textContent=(this.data.prog==100,"more_horiz")},t.onmouseleave=()=>{this.isHovering=!1,!t.classList.contains("open")&&(t.classList.remove("material-symbols-outlined"),t.classList.add("percent"),t.textContent=this.tmp)}):(this.tmp=t.textContent,t.onmouseenter=()=>{this.isHovering=!0,this.data.s,t.classList.add("material-symbols-outlined"),t.textContent="play_arrow"},t.onmouseleave=()=>{this.isHovering=!1,!t.classList.contains("open")&&(this.data.s?t.classList.remove("material-symbols-outlined"):t.classList.add("material-symbols-outlined"),t.textContent=this.tmp)}));let l=e.querySelector("canvas");if(l){let n=function(){l.width=500,l.height=500;let p=l.getContext("2d"),u=40;p.lineWidth=u;let f=Math.PI/2,w=r/o,x=50*Math.cos((w-.44)*Math.PI*.9)*(o/d);r+=.004*x,f=r;let g=!1;(r>=o-.05||r>=d||o==0||!h.data.s)&&(f=o,g=!0),p.strokeStyle="rgba(0,0,0,0.15)",p.beginPath(),p.arc(l.width/2,l.height/2,l.width/2-u,0,Math.PI*2),p.stroke(),p.strokeStyle="green",p.beginPath(),p.arc(l.width/2,l.height/2,l.width/2-u,0,f),p.stroke(),!(r>=o||r>=d||g)&&(h.updateProgRef=requestAnimationFrame(n))},d=Math.PI*2+.05,o=this.data.prog/100*d,r=0,h=this;n()}t&&t.addEventListener("click",n=>{if(n.stopImmediatePropagation(),n.stopPropagation(),!this.data.s){se(this.lid);return}t.classList.contains("open")?this.close():this.open()}),this.d_actions&&(this.d_actions.children[0].addEventListener("click",n=>{if(n.stopImmediatePropagation(),n.stopPropagation(),this.data.prog==100){Ee(this);return}se(this.lid,0)}),this.d_actions.children[1].addEventListener("click",n=>{n.stopImmediatePropagation(),n.stopPropagation(),je(this)})),e.querySelector(".l-lesson-name")?.addEventListener("click",n=>{new Qt(this).load()})}init(){let e=this.e;this.l.next.concat(this.l.prev),e.parentElement}deleteProgress(){this.data.eventI=-1,this.data.taskI=-1,this.data.prog=0,this.data.s=!1,this.data.sceneI=0,this.data.final_order=[],this.update()}resetProgress(){console.log(this),this.data.eventI=-1,this.data.taskI=-1,this.data.prog=0,this.data.s=!0,this.data.sceneI=0,this.data.final_order=[],this.update(),console.log(this)}}let B=[],_e=[];function se(i,e=0){z.emit("startLesson",i,e,s=>{if(s!=0){alert(`Error ${s} trying to start lesson`);return}localStorage.setItem("cc-lastLID",i),Se.push({path:`/learn/lesson/${i}`})})}async function Ee(i){await je(i,!0)&&se(i.lid)}function je(i,e=!1){return new Promise(s=>{new Ft(`${e?"Restart Lesson":"Delete Progress"}`,`Are you sure you want<br> to ${e?"restart":"delete"} lesson progress for "${i.l.name}" ?`,()=>{z.emit("deleteLessonProgress",i.l.lid,l=>{l==0?(i.deleteProgress(),s(!0)):(alert("Err: while deleting lesson progress, error code: "+l),s(!1))})},()=>{}).load().body.querySelector(".b-confirm").classList.add("warn")})}class Qt extends Ke{constructor(e){let s=e.l.getTypeData();super("// "+s.label.toUpperCase()+(e.partNum?` (Part ${e.partNum})`:""),s.icon),this.lesson=e,this.typeData=s}lesson;typeData;p;load(e,s){super.load(e,s),this.outerMenu.classList.add("menu-lesson"),this.typeData.accent&&(this.outerMenu.style.setProperty("--accent",this.typeData.accent),this.outerMenu.style.setProperty("--cta-btn-col",this.typeData.accent)),this.body.innerHTML=`
            <div class="menu-block-cont" style="gap:30px;margin:10px;height:100%">
                <div class="menu-block details-block">
                    <div class="labeled-label">
                        <div>Lesson Name</div>
                        <div class="l-name">${et(this.lesson.l.name)}</div>
                    </div>
                    <br><br>
                    <div class="start-cont">
                        <div class="l-prog">
                            ${this.lesson.data.prog}% Complete
                        </div>
                        <button class="b-more-options hide">
                            <div class="material-symbols-outlined">more_vert</div>
                        </button>
                        <button class="b-continue hide">Continue</button>
                        <button class="b-start hide">Start</button>
                    </div>
                    <br><br>
                    <div class="labeled-label">
                        <div>Description</div>
                        <div class="l-desc d-bubble">
                            ${this.lesson.l.desc.map(d=>`<div>${Ue(d)}</div>`).join("<br>")}
                            <!--<div>This is an example descripion for a lesson.<br><br>Probably a lot of useful information would go in here like what you will learn specifically in a list such as:</div>
                            <ul>
                                <li>Thing to learn 1</li>
                                <li>Another thing</li>
                                <li>You can code now</li>
                            </ul>
                            <div>And that's about it.</div>-->
                        </div>
                    </div>
                    <br><br>
                    <div class="labeled-label">
                        <div>Key Takeaways</div>
                        <div class="d-bubble">
                            <ul>
                                ${this.lesson.l.takeaways.map(d=>`<li>${Ue(d)}</li>`).join("")}
                                <!--<li>Thing to learn 1</li>
                                <li>Another thing</li>
                                <li>You can code now</li>-->
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="menu-block preview-block">
                    <div class="labeled-label" style="height:100%;display:flex;flex-direction:column">
                        <div>Sample</div>
                        <div class="sample-editor" style="height:calc(100% - 75px)">
                            
                        </div>
                    </div>
                </div>
            </div>
        `,this.loadEditor();let t=this.body.querySelector(".b-start"),l=this.body.querySelector(".b-continue"),a=this.body.querySelector(".b-more-options"),n=()=>{this.lesson.data.prog==100?l.textContent="Restart":l.textContent="Continue",this.lesson.data.s?(t.classList.add("hide"),l.classList.remove("hide"),a.classList.remove("hide")):(t.classList.remove("hide"),l.classList.add("hide"),a.classList.add("hide"))};return n(),t.addEventListener("click",d=>{se(this.lesson.lid)}),l.addEventListener("click",async d=>{this.lesson.data.prog==100?Ee(this.lesson):se(this.lesson.lid)}),a.addEventListener("mousedown",d=>{Je(a,()=>["Delete Progress","Restart","[Debug] Continue","[Debug] ERASE META"],async o=>{o==0?await je(this.lesson)&&(this.lesson.data.s=!1,n()):o==1?await Ee(this.lesson):o==2?se(this.lesson.lid):o==3&&z.emit("debug_eraseLessonMeta",this.lesson.lid,r=>{Nt(r)||this.close()})},{getIcons:()=>["delete","replay"]})}),this}async loadPreview(){Pt(At.project)}async loadEditor(){await Ve();let e=new Mt("Sample Project",this.body.querySelector(".sample-editor"),{readonly:!1});e.builtInFileList=!0,this.p=e,St(e.parent,jt.none),_t(e,!0),e.parent.querySelector(".b-add-file").remove();let s=this.lesson.l.previewData;async function t(l,a){if(l)for(const n of l.items)if("buf"in n)await e.createFile(n.name,n.buf,null,a,!1);else{let d=e.createFolder(n.name,a,!1);await t(n,d)}}await t(s);for(const l of e.files)l.open(!1);e.curFile?.editor?.layout(),await this.loadPreview()}onClose(){if(this.p)for(const e of this.p.files)e.editor&&e.editor.dispose()}}let K=10;async function Wt(i){let e=D.offsetWidth/2,s=D.offsetHeight/2;console.log("----- CXCY",e,s);let{ar:t,meta:l}=await new Promise(o=>{z.emit("getProgressTree",i,r=>{if(typeof r=="number"||r==null){alert(`Error ${r} while trying to get progress tree: ${i}`);return}o(Bt(r))})}),a=await new Promise(o=>{z.emit("getLearnData",t.map(r=>r.lid),r=>{if(typeof r=="number"){alert(`Error ${r}: failed to retrieve learn progress`);return}let h=[],p=Object.keys(r);for(const u of p){let f=r[u];f&&(f.lid=u,h.push(f))}o(h)})});for(const o of t)o.root=t,o.rootProg=a;function n(o,r){if(r.includes(o.lid))return[0,0];r.push(o.lid);let h=o.prev[0];if(h){let p=o,u=t.find(x=>x.lid==h.id);if(!p)return console.warn("$ couldn't find item: ",o.lid,h.id),[0,0];if(!u)return console.warn("$ couldn't find prevItem: ",o.lid,h.id),[0,0];let[f,w]=n(u,r);return o._x=e+(o.x+f)*K,o._y=s+(o.y+w)*K,[o.x+f,o.y+w]}return[o.x,o.y]}for(const o of t)n(o,[]);for(const o of t)if(o._x==null){let r=e+o.x*K,h=s+o.y*K;o._x=r,o._y=h}t.sort((o,r)=>(o._x|r._y)-o._x*r._y);let d=document.createElement("div");Y.appendChild(d);for(const o of t){await L(10);let r=a.find(g=>g.lid==o.lid),h=o._x,p=o._y,u=document.createElement("div");u.classList.add("item-cont");let f=document.createElement("div");f.classList.add("circle"),u.style.left=h+"px",u.style.top=p+"px",u.addEventListener("mouseenter",g=>{U=!1}),u.addEventListener("mouseleave",g=>{U=!0}),u.appendChild(f),d.appendChild(u);let w=new Ut(o,f,r);B.push(w),w.update(),setTimeout(()=>{o.prev.every(g=>B.find(T=>T.lid==g.id)?.data.hf)&&z.emit("postFinishLesson",w.lid,g=>{g!=0&&typeof g!="number"&&o.animateUnlocks(t,g)})},1e3);let x=50;if(o.prev)for(const g of o.prev){let T=t.find(W=>W.lid==g.id);if(T){let W=function(){return O+=P,A+=P,re-=P,de-=P,m>v?m-=P:m+=P,y>b?y-=P:y+=P,v>m?v-=P:v+=P,b>y?b-=P:b+=P,!0},$=function(){let ve=E.querySelector("path"),he=ve.getTotalLength()/2;he=Math.floor(he/60)*60+45;let Xe=ve.getPointAtLength(he-1),Re=ve.getPointAtLength(he+1),ze=ve.getPointAtLength(he),ft=Re.x-Xe.x,mt=Re.y-Xe.y,vt=Math.atan2(mt,ft);J.style.left=ze.x+"px",J.style.top=ze.y+"px",J.style.transform=`translate(-50%,-50%) rotate(${vt}rad)`},E=document.createElement("div");E.classList.add("test");let O=0,A=0,re=0,de=0,Oe=[o._x,T._x],Ae=[o._y,T._y];O=Math.min(...Oe),A=Math.min(...Ae),re=Math.max(...Oe),de=Math.max(...Ae);let xe=(re+O)/2,H=(de+A)/2,m=T._x,y=T._y,v=o._x,b=o._y,$e=v-m,Le=b-y,He=Math.sqrt($e**2+Le**2),_=$e,q=Le,me=g.bendOther;$e/=He,Le/=He;let j="40,20";E.style.width=Math.abs(_)+"px",E.style.height=Math.abs(q)+"px",E.style.left=O+"px",E.style.top=A+"px";let I="8",ce=0,P=5,pt=(Math.abs(_)+ce*2)/Math.abs(_);E.innerHTML=`
                    <!--<svg viewBox="0 0 ${D.offsetWidth} ${D.offsetHeight}" xmlns="http://www.w3.org/2000/svg">-->
                    <svg style="transform:scale(${pt});margin-left:0px;margin-top:0px" viewBox="${O-ce} ${A-ce} ${Math.abs(_)+ce*2} ${Math.abs(q)+ce*2}" xmlns="http://www.w3.org/2000/svg">
        <!-- <path d="M ${O-x},${A-x} L ${re+x},${A-x} L ${re+x},${de+x} L ${O-x},${de+x} z" stroke="red" fill="none"/> -->

        
        <!--<path d="M ${m},${y} Q ${m},${H} ${xe},${H}" stroke="var(--col)" fill="none" stroke-dasharray="${j}" stroke-linecap="round" stroke-width="${I}"/>-->
        <!--<path d="M ${xe},${H} Q ${v},${H} ${v},${b}" stroke="var(--col)" fill="none" stroke-dasharray="${j}" stroke-linecap="round" stroke-width="${I}"/>-->

        <!--<path d="M ${m},${y} Q ${m},${H} ${xe},${H} Q ${v},${H} ${v},${b}" stroke="var(--col)" fill="none" stroke-dasharray="${j}" stroke-linecap="round" stroke-width="${I}"/>-->

        ${W(),""}
        ${_>0&&q>0&&me?`<path d="M ${m},${y} Q ${v},${y} ${v},${b}" stroke="var(--col)" fill="none" stroke-dasharray="${j}" stroke-linecap="round" stroke-width="${I}"/>`:_>0&&q>0?`<path d="M ${m},${y} Q ${m},${b} ${v},${b}" stroke="var(--col)" fill="none" stroke-dasharray="${j}" stroke-linecap="round" stroke-width="${I}"/>`:_>0&&q<0&&me?`<path d="M ${m},${y} Q ${m},${b} ${v},${b}" stroke="var(--col)" fill="none" stroke-dasharray="${j}" stroke-linecap="round" stroke-width="${I}"/>`:_>0&&q<0?`<path d="M ${m},${y} Q ${v},${y} ${v},${b}" stroke="var(--col)" fill="none" stroke-dasharray="${j}" stroke-linecap="round" stroke-width="${I}"/>`:_<0&&q>0&&me?`<path d="M ${m},${y} Q ${v},${y} ${v},${b}" stroke="var(--col)" fill="none" stroke-dasharray="${j}" stroke-linecap="round" stroke-width="${I}"/>`:_<0&&q>0?`<path d="M ${m},${y} Q ${m},${b} ${v},${b}" stroke="var(--col)" fill="none" stroke-dasharray="${j}" stroke-linecap="round" stroke-width="${I}"/>`:_<0&&q<0&&me?`<path d="M ${m},${y} Q ${m},${b} ${v},${b}" stroke="var(--col)" fill="none" stroke-dasharray="${j}" stroke-linecap="round" stroke-width="${I}"/>`:`<path d="M ${m},${y} Q ${v},${y} ${v},${b}" stroke="var(--col)" fill="none" stroke-dasharray="${j}" stroke-linecap="round" stroke-width="${I}"/>`}
    </svg>
                    `;let V=document.createElement("div");V.className="path-cont",setTimeout(()=>{Y.appendChild(V)},50),g.pathCont=V,w.prevPathCont=V,V.appendChild(E);let J=document.createElement("div");J.className="arrow",$(),J.innerHTML=`
                        <svg viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
                            <path d="M 5,5 L 25,25 L 5,45" stroke-width="8" fill="none" stroke="var(--col)" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    `,V.appendChild(J)}}}l&&setTimeout(()=>{if(l.objs)for(const o of l.objs){let r=R.add(o);_e.push(r)}},0)}function Vt(){let i=document.createElement("div");return i.classList.add("item-cont","type-warp-zone"),Y.children[0].appendChild(i),i.style.left="1100px",i.style.top="1300px",i.innerHTML=`
        <div class="gfx-cont">
            <!--<div class="grad-cont">
                <div></div>
                <div></div>
                <div></div>
            </div>-->
            <svg width="400" height="400" class="blend-group-0">
                <rect class="blend-item" x="150" y="150" width="100" height="100" fill="rgb(255,0,0)" rx="20" ry="20"></rect>
                <rect class="blend-item" x="150" y="150" width="100" height="100" fill="rgb(0,255,0)" rx="20" ry="20"></rect>
                <rect class="blend-item" x="150" y="150" width="100" height="100" fill="rgb(0,0,255)" rx="20" ry="20"></rect>
            </svg>
            <!--<svg width="400" height="400" class="blend-group-1">
                <rect class="blend-item" x="150" y="150" width="100" height="100" fill="rgb(255,0,0)" rx="20" ry="20"></rect>
                <rect class="blend-item" x="150" y="150" width="100" height="100" fill="rgb(0,255,0)" rx="20" ry="20"></rect>
                <rect class="blend-item" x="150" y="150" width="100" height="100" fill="rgb(0,0,255)" rx="20" ry="20"></rect>
            </svg>-->
        </div>
    `,i}function Jt(i,e){let s=document.createElement("div");return s.classList.add("item-cont","type-sign"),s.style.left=i+"px",s.style.top=e+"px",s.innerHTML=`
        <div class="sign-cont">
            <div class="sign-stem"></div>
            <div class="sign-back"></div>
            <div class="sign-face">
                <div>[...]</div>
            </div>
        </div>
    `,s}var rt=(i=>(i[i.sign=0]="sign",i[i.warp=1]="warp",i[i.banner=2]="banner",i[i.element=3]="element",i[i.group=4]="group",i))(rt||{});class Zt{constructor(){this.reg=new Map,this.objCont=document.createElement("div"),Y.appendChild(this.objCont)}reg;objCont;register(e){let s=e.getType();if(this.reg.has(s)){console.warn("$ learn object registry already has an entry with the type: ",rt[s]);return}this.reg.set(s,e)}add(e){let s=this.reg.get(e.type);if(!s){console.warn("Failed to find ref: ",e);return}let t=s.parse(e);if(!s){console.warn("Failed to find LearnObj type in registry: ",e);return}let l=t.load();if(t.hasManualPostLoad()||t.postLoad(),!s){console.warn("Failed to load elm from LearnObj load: ",e);return}return this.objCont.appendChild(l),t.relObj&&!t.relObj.data.u&&t.hideObj(),e.hide&&l.classList.add("hide"),t}}let R;class N{constructor(){}x;y;id;data;rel;relObj;elm;hide;wasJustUnlocked=!1;postLoad(){this.elm.style.left=this.x+"px",this.elm.style.top=this.y+"px",this.elm.classList.add("lo-any"),this.wasJustUnlocked=!1}hasManualPostLoad(){return!1}static parseSuper(e,s){if(e.id=s.id,e.data=s.data,e.rel=s.rel,s.rel){let[t,l]=s.rel.split("@");if(t!="o"){if(t=="l"){let a=B.find(n=>n.lid==l);if(!a){console.warn(`$ err: not good! couldn't find relation object for learn obj:

`,t,l,s.type,s.id);return}e.x=a.l._x+s.x*K,e.y=a.l._y+s.y*K,e.relObj=a}}}else e.x=s.x,e.y=s.y}showObj(){this.hide||this.elm&&(this.elm.classList.remove("force-hide"),this.wasJustUnlocked=!0)}hideObj(){this.elm&&this.elm.classList.add("force-hide")}}class Ie extends N{constructor(){super()}getType(){return 0}parse(e){let s=new Ie;return N.parseSuper(s,e),s}load(){let e=Jt(this.x,this.y);return e.querySelector(".sign-face").addEventListener("click",t=>{this.open()}),this.elm=e,e}open(){new Gt(this).load()}}class Gt extends Ke{constructor(e){super("A Sign","lightbulb"),this.obj=e}obj;load(e,s){super.load(e,s),this.menu.classList.add("menu-sign"),this.menu.style.setProperty("--accent","rgb(91, 49, 18)");let t=document.createElement("div");t.className="sign-menu-list menu-block";let l;const a=()=>{l=document.createElement("p"),l.classList.add("d-bubble"),t.appendChild(l)};if(a(),this.obj.data){if(this.obj.data.title){let n=document.createElement("h3");n.textContent=this.obj.data.title,n.classList.add("sign-title"),t.insertBefore(n,t.children[0])}for(const n of this.obj.data.desc){if(n.startsWith("$")){n.substring(1)=="br"&&a();continue}let d=document.createElement("p");d.textContent=n,l.appendChild(d)}}else{let n=document.createElement("p");n.textContent="[ There doesn't seem to be any text on the sign. ]",n.style.textAlign="center",l.appendChild(n)}return this.body.appendChild(t),this}}class De extends N{constructor(){super()}getType(){return 2}parse(e){let s=new De;return N.parseSuper(s,e),s}load(){let e=document.createElement("div");e.className="lo-banner";let s=document.createElement("div");return s.textContent=this.data.title,e.appendChild(s),this.elm=e,e}}class Te extends N{constructor(){super()}hasCreatedParts=!1;getType(){return 3}parse(e){let s=new Te;return N.parseSuper(s,e),s}cont;load(){let e=document.createElement("div");e.className="lo-element",this.elm=e;let s=document.createElement("div");if(s.className="lo-element-ops",e.appendChild(s),this.relObj){let l=document.createElement("div");l.className="icon-btn normal",l.innerHTML="<div>info</div>",l.onclick=()=>{alert(`These little snippets are examples of something you could create using the information learned in this lesson.

This one is based off the lesson: "`+this.relObj.l.name.toUpperCase()+'"')},s.appendChild(l),Ge(l,"Info")}let t=document.createElement("div");return this.cont=t,t.className="lo-element-cont",e.appendChild(t),setTimeout(()=>{!this.hasCreatedParts&&this.relObj.data.u&&this.createPart(this.data,t,!1)},50),t.addEventListener("mouseenter",l=>{U=!1}),t.addEventListener("mouseleave",l=>{U=!0}),this.elm}async createPart(e,s,t){if(this.hasCreatedParts=!0,e.tag=="script"){console.warn("Sorry! scripts aren't allowed to be loaded dynamically yet using learnObj elements!");return}let l=document.createElement(e.tag);s.appendChild(l);let a=!this.relObj?.data.u;if(t!=null&&(a=t),a&&await L(200),e.className&&(l.className=e.className),e.attr){let n=Object.keys(e.attr);for(const d of n)l.setAttribute(d,e.attr[d]),a&&await L(200)}if(e.style){let n=Object.keys(e.style);for(const d of n)l.style[d]=e.style[d],a&&await L(200)}if(e.children)for(const n of e.children)await this.createPart(n,l),a&&await L(200);return e.text&&(a&&await L(200),l.textContent=e.text),l}showObj(){this.hasCreatedParts?console.log("ERR: parts were already created!"):this.createPart(this.data,this.cont,!0),super.showObj()}}let F;class Fe extends N{getType(){return 1}parse(e){let s=new Fe;return N.parseSuper(s,e),s}load(){return this.elm=Vt(),this.elm.addEventListener("click",async e=>{if(G.warping)return;F&&F.remove(),F=document.createElement("div"),document.body.insertBefore(F,document.body.children[0]),F.className="warp-cover";let s=this.elm.getBoundingClientRect(),t=s.x+s.width/2,l=s.y+s.height/2;F.style.left=`${t}px`,F.style.top=`${l}px`,G.warping=!0,await L(1e3),await Se.push({path:"/learn",query:{f:this.data.folder}}),G.learnFolder=this.data.folder,await ht(),await L(50),F.classList.add("leave"),await L(750),F.remove(),F=void 0,G.warping=!1}),this.elm}constructor(){super()}}class Ne extends N{getType(){return 4}parse(e){let s=new Ne;return N.parseSuper(s,e),s}load(){let e=document.createElement("div");e.className="lo-group",this.elm=e;for(const s of this.data.lessons){let t=B.find(a=>a.lid==s);if(!t){console.warn("couldn't find lesson item with lid: ",s);continue}let l=document.createElement("div");l.appendChild(t.e),e.appendChild(l)}return e}}let U=!0,Pe=0,Me=0,ie=0,le=0,ne=!1,k=0,C=0,c=1,qe=5,oe=0,ae=0,fe=0;function Kt(){fe++,S.classList.add("animate")}function es(){fe--,fe<=0&&S.classList.remove("animate")}function be(){return fe>0}let Z,ge=1;function Q(){if(!S)return;S.style.marginLeft=k+"px",S.style.marginTop=C+"px";let i=S.getBoundingClientRect(),e=i.x+i.width/2,s=i.y+i.height/2;pe.style.backgroundPositionX=e+"px",pe.style.backgroundPositionY=s+"px"}function Ye(i){c*=i,c<.1&&(c=.1),c>5&&(c=5);let e=S.getBoundingClientRect();S.style.scale=c.toString(),pe.style.backgroundSize=c*qe+"vw";let s=S.getBoundingClientRect(),t=s.width-e.width,l=s.height-e.height,a=oe-(e.x+e.width/2),n=ae-(e.y+e.height/2),d=a/e.width,o=n/e.height;k-=t*d,C-=l*o,Q(),we=!0}let we=!1;function dt(i){S&&(c=i,c<.1&&(c=.1),c>5&&(c=5),S.style.scale=c.toString(),pe.style.backgroundSize=c*qe+"vw")}function ct(){ue=[],B=[],_e=[],U=!0,Pe=0,Me=0,ie=0,le=0,ne=!1,k=0,C=0,c=1,qe=5,oe=0,ae=0,fe=0,Z=[],ge=1,we=!1,X=[]}async function ht(){if(!await Dt())return;await Ve(),ct(),pe=document.querySelector(".main"),D=document.querySelector(".p-tree"),S=document.querySelector(".pan-cont"),Y=document.querySelector(".cont"),Y.textContent="",Xt(),R=new Zt,R.register(new Ie),R.register(new De),R.register(new Te),R.register(new Fe),R.register(new Ne);let e=new URL(location.href).searchParams.get("f")??"theBeginnings";Wt(e)}function ut(){localStorage.setItem("cc-panX",(k||0).toString()),localStorage.setItem("cc-panY",(C||0).toString()),localStorage.setItem("cc-zoom",(c||1).toString())}function ts(){k=0,C=0,Q(),dt(1),we=!0}const ss={class:"extra-overlay"},is={class:"live-lessons"},ls={class:"main"},ns=gt({__name:"LearnView",setup(i){const e=We();yt(async()=>{ke("/styles/learn.css"),ke("/styles/editor.css"),ke("/styles/flashcards.css"),await ht()}),bt(()=>{qt(),Ht(),Yt(),Ze(!0),e.$reset()});const s=wt("");function t(){let l=s.value;l&&l.length==4&&(console.log("attempting to join live lesson with code:",l),z.emit("join-live-lesson",l,a=>{if(!a){let n="Failed to join live lesson";console.warn(n),alert(n);return}if(typeof a=="number"){let n=`Failed to join live lesson with code: ${a}`;console.warn(n),alert(n);return}else if("err"in a){let n=`Failed to join live lesson with code: ${a.err}`;console.warn(n),alert(n);return}alert("Joined live lesson at code: "+l),console.log(":: joined lesson with code",l,a),Se.push({path:`/learn/lesson/live-${l}`})}))}return(l,a)=>(Et(),xt(Ct,null,[$t(It,{"btn-index":0,"page-id":"learn"}),a[4]||(a[4]=M("div",{class:"learn-page"},null,-1)),M("div",ss,[M("div",is,[a[2]||(a[2]=M("div",{style:{"margin-inline":"8px"}},"Join Live Lesson",-1)),Lt(M("input",{"onUpdate:modelValue":a[0]||(a[0]=n=>s.value=n),type:"text",name:"live-lesson-code",id:"live-lesson-code",placeholder:"Join code"},null,512),[[kt,s.value]]),M("button",{class:"accent button-thin",onClick:t},"Join")])]),a[5]||(a[5]=M("div",{class:"center-mark"},null,-1)),M("div",ls,[M("div",{onClick:a[1]||(a[1]=(...n)=>Be(Qe)&&Be(Qe)(...n)),class:"view-options material-symbols-outlined"},"menu"),a[3]||(a[3]=M("div",{class:"p-tree"},[M("div",{class:"pan-cont"},[M("div",{class:"cont"})])],-1))])],64))}}),hs=Ot(ns,[["__scopeId","data-v-714f8cd6"]]);export{hs as default};
